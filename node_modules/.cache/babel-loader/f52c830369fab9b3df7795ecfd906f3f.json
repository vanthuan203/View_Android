{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/KT2/Desktop/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/KT2/Desktop/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/KT2/Desktop/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable jsx-a11y/anchor-is-valid */import React,{useEffect,useState}from'react';import UserItem from'./components/UserItem';import{actions}from\"./redux/AccountRedux\";import{useDispatch}from'react-redux';import EditMulti from\"./modals/EditMulti\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserList=function UserList(_ref){var className=_ref.className,accounts=_ref.accounts;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showEditMulti=_useState2[0],setShowEditMulti=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showAddManual=_useState4[0],setShowAddManual=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),total_user=_useState6[0],settotal_user=_useState6[1];useEffect(function(){dispatch(actions.requestAccounts());},[]);var isShowFixMulti=accounts.find(function(item){if(item.checked){return true;}return false;});var total_waring=0;var total_thread=0;var total_view24h=0;var total_thread_set=0;for(var i=0;i<accounts.length;i++){if((Date.now()-accounts[i].timecheck)/1000/60>6){total_waring=total_waring+1;}else{total_thread_set=total_thread_set+(accounts[i].threads-1);total_thread=total_thread+accounts[i].total;}total_view24h=total_view24h+accounts[i].view24h;}useEffect(function(){function getcounts(){return _getcounts.apply(this,arguments);}function _getcounts(){_getcounts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var requestUrl,response,responseJson,counts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:requestUrl='http://accpremiumpostget-env.ap-southeast-1.elasticbeanstalk.com/gmails/countgmails';_context.next=3;return fetch(requestUrl,{method:'get',headers:new Headers({'Authorization':'1','Content-Type':'application/x-www-form-urlencoded'})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:responseJson=_context.sent;counts=responseJson.counts;console.log(counts);settotal_user(counts);case 10:case\"end\":return _context.stop();}}},_callee);}));return _getcounts.apply(this,arguments);}getcounts();});var clickDeleteHandler=function clickDeleteHandler(){var arr=[];accounts.forEach(function(item){if(item.checked==true)arr.push(item.vps);});var vps=arr.join(',');if(window.confirm(\"Bạn chắc chắn muốn xóa \"+arr.length+\" VPS!\")==true){dispatch(actions.deleteVpsRequest(vps));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card \".concat(className),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header border-0 pt-5\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"card-title align-items-start flex-column\",children:[/*#__PURE__*/_jsx(\"span\",{style:{fontFamily:'monospace'},className:\"card-label fw-bolder fs-3 mb-1\",children:\"Danh s\\xE1ch VPS \"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'black',fontSize:20},className:\"badge badge-success\",children:[accounts?accounts.length:0,\" vps running\",/*#__PURE__*/_jsxs(\"span\",{className:\"badge badge-warning\",style:{color:'black',margin:4},children:[total_waring,\" vps warning\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge badge-secondary\",style:{color:'black',margin:4},children:[total_thread,\" thread\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge badge-danger\",style:{color:'black',margin:4},children:[total_view24h,\" view\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge badge-light-primary\",style:{color:'black',margin:4},children:[total_thread_set,\" thread set\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge badge-warning\",style:{color:'black',margin:4},children:[total_user,\" user\"]})]})]}),isShowFixMulti&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{style:{fontWeight:'bold',margin:5},onClick:function onClick(){setShowEditMulti(true);},className:\"btn btn-sm btn-primary\",children:\"Ch\\u1EC9nh s\\u1EEDa\"}),/*#__PURE__*/_jsx(\"button\",{style:{fontWeight:'bold'},onClick:function onClick(){return clickDeleteHandler();},className:\"btn btn-sm btn-primary mx-0\",children:\"X\\xF3a VPS\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body py-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"fw-bolder text-muted\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"w-25px\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-check form-check-sm form-check-custom form-check-solid\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(evt){dispatch(actions.checkedAllChange(evt.target.checked));},className:\"form-check-input\",type:\"checkbox\",value:\"1\",\"data-kt-check\":\"true\",\"data-kt-check-target\":\".widget-13-check\"})})}),/*#__PURE__*/_jsx(\"th\",{className:\"w-25px\",children:\"STT\"}),/*#__PURE__*/_jsx(\"th\",{className:\"min-w-150px\",children:\"VPS IP\"}),/*#__PURE__*/_jsx(\"th\",{className:\"min-w-140px\",children:\"VPS Option\"}),/*#__PURE__*/_jsx(\"th\",{className:\"min-w-120px\",children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{className:\"min-w-100px text-end\",children:\"H\\xE0nh \\u0111\\u1ED9ng\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:accounts&&(accounts===null||accounts===void 0?void 0:accounts.map(function(item,index){return/*#__PURE__*/_jsx(UserItem,{item:item,index:index},item.id+index);}))})]})})}),/*#__PURE__*/_jsx(EditMulti,{show:showEditMulti,close:function close(){setShowEditMulti(false);}})]});};export{UserList};","map":{"version":3,"names":["React","useEffect","useState","UserItem","actions","useDispatch","EditMulti","UserList","className","accounts","dispatch","showEditMulti","setShowEditMulti","showAddManual","setShowAddManual","total_user","settotal_user","requestAccounts","isShowFixMulti","find","item","checked","total_waring","total_thread","total_view24h","total_thread_set","i","length","Date","now","timecheck","threads","total","view24h","getcounts","requestUrl","fetch","method","headers","Headers","response","json","responseJson","counts","console","log","clickDeleteHandler","arr","forEach","push","vps","join","window","confirm","deleteVpsRequest","fontFamily","color","fontSize","margin","fontWeight","evt","checkedAllChange","target","map","index","id"],"sources":["C:/Users/KT2/Desktop/ssc.fe.cheatview-main/src/app/modules/accounts/UserList.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, {useEffect, useState} from 'react'\nimport { KTSVG, toAbsoluteUrl } from '../../../_metronic/helpers'\nimport { AccountModel } from 'app/modules/accounts/models/Account'\n\nimport UserItem from './components/UserItem'\nimport {actions} from \"./redux/AccountRedux\";\nimport {shallowEqual, useDispatch, useSelector} from 'react-redux'\nimport {ComputerModel} from \"../history/models/Account\";\nimport {RootState} from \"../../../setup\";\nimport EditMulti from \"./modals/EditMulti\";\ntype Props = {\n  className: string,\n  accounts: AccountModel[]\n}\n\nconst UserList: React.FC<Props> = ({ className, accounts }) => {\n\n  const dispatch = useDispatch()\n  const [showEditMulti, setShowEditMulti] = useState(false)\n  const [showAddManual, setShowAddManual] = useState(false)\n  const [total_user, settotal_user] = useState(0)\n  useEffect(() => {\n    dispatch(actions.requestAccounts())\n  }, [])\n  const isShowFixMulti = accounts.find((item) => {\n    if (item.checked) {\n\n      return true\n    }\n    return false\n  })\n  let total_waring=0;\n  let total_thread=0;\n  let total_view24h=0;\n  let total_thread_set=0;\n  for(let i=0;i<accounts.length;i++){\n    if((Date.now()-accounts[i].timecheck)/1000/60>6){\n      total_waring=total_waring+1;\n    }else{\n      total_thread_set=total_thread_set+(accounts[i].threads-1);\n      total_thread=total_thread+accounts[i].total;\n    }\n    total_view24h=total_view24h+accounts[i].view24h;\n  }\n\n  useEffect(() => {\n    async function getcounts(){\n      const requestUrl = 'http://accpremiumpostget-env.ap-southeast-1.elasticbeanstalk.com/gmails/countgmails';\n      const response= await fetch(requestUrl,{\n        method: 'get',\n        headers: new Headers({\n          'Authorization': '1',\n          'Content-Type': 'application/x-www-form-urlencoded'\n        })\n      });\n      const responseJson= await  response.json();\n      const {counts}=responseJson;\n      console.log(counts);\n      settotal_user(counts);\n    }\n    getcounts();\n  });\n\n  const clickDeleteHandler = () => {\n    const arr:string[]=[]\n    accounts.forEach(item=>{\n      if(item.checked==true)\n        arr.push(item.vps)\n    })\n    const vps=arr.join(',')\n    if (window.confirm(\"Bạn chắc chắn muốn xóa \"+arr.length+\" VPS!\") == true) {\n      dispatch(actions.deleteVpsRequest(vps))\n    }\n  }\n\n  return (\n    <div className={`card ${className}`}>\n      {/* begin::Header */}\n\n      <div  className='card-header border-0 pt-5'>\n        <h3 className='card-title align-items-start flex-column'>\n          <span style={{fontFamily:'monospace'}} className='card-label fw-bolder fs-3 mb-1'>Danh sách VPS </span>\n          <span style={{color:'black',fontSize:20}} className='badge badge-success'>{accounts?accounts.length:0} vps running\n\n            <span className='badge badge-warning' style={{ color:'black',margin:4}}>{total_waring} vps warning</span>\n            <span className='badge badge-secondary' style={{ color:'black',margin:4}}>{total_thread} thread</span>\n            <span className='badge badge-danger' style={{ color:'black',margin:4}}>{total_view24h} view</span>\n            <span className='badge badge-light-primary' style={{ color:'black',margin:4}}>{total_thread_set} thread set</span>\n            <span className='badge badge-warning' style={{ color:'black',margin:4}}>{total_user} user</span>\n            </span>\n        </h3>\n        {isShowFixMulti && (\n            <div>\n                <button style={{fontWeight:'bold',margin:5}}\n                        onClick={() => {\n                          setShowEditMulti(true)\n                        }}\n                        className='btn btn-sm btn-primary'>\n                  Chỉnh sửa\n                </button>\n                <button style={{fontWeight:'bold'}}\n                        onClick={()=>clickDeleteHandler()}\n                    className='btn btn-sm btn-primary mx-0'>\n                  Xóa VPS\n                </button>\n            </div>\n\n        )}\n      </div>\n      {/* end::Header */}\n      {/* begin::Body */}\n      <div className='card-body py-3'>\n        {/* begin::Table container */}\n        <div className='table-responsive'>\n          {/* begin::Menu */}\n          <table className='table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4'>\n            {/* begin::Table head */}\n            <thead>\n              <tr className='fw-bolder text-muted'>\n\n                <th className='w-25px'>\n                  <div className='form-check form-check-sm form-check-custom form-check-solid'>\n                    <input\n                        onChange={(evt) => {\n                          dispatch(actions.checkedAllChange(evt.target.checked))\n                        }}\n                        className='form-check-input'\n                        type='checkbox'\n                        value='1'\n                        data-kt-check='true'\n                        data-kt-check-target='.widget-13-check'\n                    />\n                  </div>\n                </th>\n                <th className='w-25px'>STT</th>\n                <th className='min-w-150px'>VPS IP</th>\n                <th className='min-w-140px'>VPS Option</th>\n                <th className='min-w-120px'>Trạng thái</th>\n                <th className='min-w-100px text-end'>Hành động</th>\n              </tr>\n            </thead>\n            {/* end::Table head */}\n            {/* begin::Table body */}\n            <tbody>\n              {\n                accounts&&accounts?.map((item: AccountModel,index:number) => {\n                  return <UserItem key={item.id+index} item={item} index={index} />\n                })\n              }\n\n            </tbody>\n            {/* end::Table body */}\n          </table>\n          {/* end::Table */}\n        </div>\n        {/* end::Table container */}\n      </div>\n      {/* begin::Body */}\n      <EditMulti\n          show={showEditMulti}\n          close={() => {\n            setShowEditMulti(false)\n          }}\n      />\n    </div>\n  )\n}\nexport  { UserList }"],"mappings":"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"},"metadata":{},"sourceType":"module"}