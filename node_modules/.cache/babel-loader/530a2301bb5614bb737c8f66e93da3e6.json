{"ast":null,"code":"import _objectSpread from\"C:/Users/KT2/OneDrive/Documents/Buffh/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/KT2/OneDrive/Documents/Buffh/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable jsx-a11y/anchor-is-valid */import React,{useState}from'react';import{useDispatch}from'react-redux';import*as Yup from'yup';import clsx from'clsx';import{Link}from'react-router-dom';import{useFormik}from'formik';import*as auth from'../redux/AuthRedux';import{login}from'../redux/AuthCRUD';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loginSchema=Yup.object().shape({email:Yup.string().email('Wrong email format').min(3,'Minimum 3 symbols').max(50,'Maximum 50 symbols').required('Email is required'),password:Yup.string().min(3,'Minimum 3 symbols').max(50,'Maximum 50 symbols').required('Password is required')});var initialValues={email:'',password:''};/*\n  Formik+YUP+Typescript:\n  https://jaredpalmer.com/formik/docs/tutorial#getfieldprops\n  https://medium.com/@maurice.de.beijer/yup-validation-and-typescript-and-formik-6c342578a20e\n*/export function Login(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var dispatch=useDispatch();var formik=useFormik({initialValues:initialValues,validationSchema:loginSchema,onSubmit:function onSubmit(values,_ref){var setStatus=_ref.setStatus,setSubmitting=_ref.setSubmitting;setLoading(true);setTimeout(function(){login(values.email,values.password).then(function(data){setLoading(false);if(data.error){setSubmitting(false);setStatus(data.error);}else{dispatch(auth.actions.login(data.data.token));}}).catch(function(){setLoading(false);setSubmitting(false);setStatus('The login detail is incorrect');});},1000);}});return/*#__PURE__*/_jsxs(\"form\",{className:\"form w-100\",onSubmit:formik.handleSubmit,noValidate:true,id:\"kt_login_signin_form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-dark mb-3\",children:\"\\u0110\\u0103ng nh\\u1EADp v\\xE0o Metronic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-400 fw-bold fs-4\",children:[\"T\\u1EA1o m\\u1EDBi ?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/auth/registration\",className:\"link-primary fw-bolder\",children:\"T\\u1EA1o m\\u1EDBi t\\xE0i kho\\u1EA3n\"})]})]}),formik.status&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-lg-15 alert alert-danger\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert-text font-weight-bold\",children:formik.status})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fv-row mb-10\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fs-6 fw-bolder text-dark\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({placeholder:\"Email\"},formik.getFieldProps('email')),{},{className:clsx('form-control form-control-lg form-control-solid',{'is-invalid':formik.touched.email&&formik.errors.email},{'is-valid':formik.touched.email&&!formik.errors.email}),type:\"email\",name:\"email\",autoComplete:\"off\"})),formik.touched.email&&formik.errors.email&&/*#__PURE__*/_jsx(\"div\",{className:\"fv-plugins-message-container\",children:/*#__PURE__*/_jsx(\"span\",{role:\"alert\",children:formik.errors.email})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fv-row mb-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between mt-n5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-stack mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-bolder text-dark fs-6 mb-0\",children:\"Password\"}),/*#__PURE__*/_jsx(Link,{to:\"/auth/forgot-password\",className:\"link-primary fs-6 fw-bolder\",style:{marginLeft:'5px'},children:\"Forgot Password ?\"})]})}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\",autoComplete:\"off\"},formik.getFieldProps('password')),{},{className:clsx('form-control form-control-lg form-control-solid',{'is-invalid':formik.touched.password&&formik.errors.password},{'is-valid':formik.touched.password&&!formik.errors.password})})),formik.touched.password&&formik.errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"fv-plugins-message-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fv-help-block\",children:/*#__PURE__*/_jsx(\"span\",{role:\"alert\",children:formik.errors.password})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",id:\"kt_sign_in_submit\",className:\"btn btn-lg btn-primary w-100 mb-5\",disabled:formik.isSubmitting||!formik.isValid,children:[!loading&&/*#__PURE__*/_jsx(\"span\",{className:\"indicator-label\",children:\"Ti\\u1EBFp t\\u1EE5c\"}),loading&&/*#__PURE__*/_jsxs(\"span\",{className:\"indicator-progress\",style:{display:'block'},children:[\"Vui l\\xF2ng ch\\u1EDD...\",/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm align-middle ms-2\"})]})]})})]});}","map":{"version":3,"names":["React","useState","useDispatch","Yup","clsx","Link","useFormik","auth","login","loginSchema","object","shape","email","string","min","max","required","password","initialValues","Login","loading","setLoading","dispatch","formik","validationSchema","onSubmit","values","setStatus","setSubmitting","setTimeout","then","data","error","actions","token","catch","handleSubmit","status","getFieldProps","touched","errors","marginLeft","isSubmitting","isValid","display"],"sources":["C:/Users/KT2/OneDrive/Documents/Buffh/ssc.fe.cheatview-main/src/app/modules/auth/components/Login.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport * as Yup from 'yup'\nimport clsx from 'clsx'\nimport { Link } from 'react-router-dom'\nimport { useFormik } from 'formik'\nimport * as auth from '../redux/AuthRedux'\nimport { login } from '../redux/AuthCRUD'\nimport { toAbsoluteUrl } from '../../../../_metronic/helpers'\n\nconst loginSchema = Yup.object().shape({\n  email: Yup.string()\n    .email('Wrong email format')\n    .min(3, 'Minimum 3 symbols')\n    .max(50, 'Maximum 50 symbols')\n    .required('Email is required'),\n  password: Yup.string()\n    .min(3, 'Minimum 3 symbols')\n    .max(50, 'Maximum 50 symbols')\n    .required('Password is required'),\n})\n\nconst initialValues = {\n  email: '',\n  password: '',\n}\n\n/*\n  Formik+YUP+Typescript:\n  https://jaredpalmer.com/formik/docs/tutorial#getfieldprops\n  https://medium.com/@maurice.de.beijer/yup-validation-and-typescript-and-formik-6c342578a20e\n*/\n\n\n\nexport function Login() {\n  const [loading, setLoading] = useState(false)\n  const dispatch = useDispatch()\n  const formik = useFormik({\n    initialValues,\n    validationSchema: loginSchema,\n    onSubmit: (values, { setStatus, setSubmitting }) => {\n      setLoading(true)\n      setTimeout(() => {\n        login(values.email, values.password)\n          .then((data:any) => {\n            setLoading(false)\n            if (data.error) {\n              setSubmitting(false)\n              setStatus(data.error)\n            } else {\n              \n              dispatch(auth.actions.login(data.data.token))\n            }\n          })\n          .catch(() => {\n            setLoading(false)\n            setSubmitting(false)\n            setStatus('The login detail is incorrect')\n          })\n      }, 1000)\n    },\n  })\n\n  return (\n    <form\n      className='form w-100'\n      onSubmit={formik.handleSubmit}\n      noValidate\n      id='kt_login_signin_form'\n    >\n      {/* begin::Heading */}\n      <div className='text-center mb-10'>\n        <h1 className='text-dark mb-3'>Đăng nhập vào Metronic</h1>\n        <div className='text-gray-400 fw-bold fs-4'>\n          Tạo mới ?{' '}\n          <Link to='/auth/registration' className='link-primary fw-bolder'>\n            Tạo mới tài khoản\n          </Link>\n        </div>\n      </div>\n      {/* begin::Heading */}\n\n      {formik.status &&\n        <div className='mb-lg-15 alert alert-danger'>\n          <div className='alert-text font-weight-bold'>{formik.status}</div>\n        </div>\n      }\n\n      {/* begin::Form group */}\n      <div className='fv-row mb-10'>\n        <label className='form-label fs-6 fw-bolder text-dark'>Email</label>\n        <input\n          placeholder='Email'\n          {...formik.getFieldProps('email')}\n          className={clsx(\n            'form-control form-control-lg form-control-solid',\n            { 'is-invalid': formik.touched.email && formik.errors.email },\n            {\n              'is-valid': formik.touched.email && !formik.errors.email,\n            }\n          )}\n          type='email'\n          name='email'\n          autoComplete='off'\n        />\n        {formik.touched.email && formik.errors.email && (\n          <div className='fv-plugins-message-container'>\n            <span role='alert'>{formik.errors.email}</span>\n          </div>\n        )}\n      </div>\n      {/* end::Form group */}\n\n      {/* begin::Form group */}\n      <div className='fv-row mb-10'>\n        <div className='d-flex justify-content-between mt-n5'>\n          <div className='d-flex flex-stack mb-2'>\n            {/* begin::Label */}\n            <label className='form-label fw-bolder text-dark fs-6 mb-0'>Password</label>\n            {/* end::Label */}\n            {/* begin::Link */}\n            <Link\n              to='/auth/forgot-password'\n              className='link-primary fs-6 fw-bolder'\n              style={{ marginLeft: '5px' }}\n            >\n              Forgot Password ?\n            </Link>\n            {/* end::Link */}\n          </div>\n        </div>\n        <input\n          type='password'\n          autoComplete='off'\n          {...formik.getFieldProps('password')}\n          className={clsx(\n            'form-control form-control-lg form-control-solid',\n            {\n              'is-invalid': formik.touched.password && formik.errors.password,\n            },\n            {\n              'is-valid': formik.touched.password && !formik.errors.password,\n            }\n          )}\n        />\n        {formik.touched.password && formik.errors.password && (\n          <div className='fv-plugins-message-container'>\n            <div className='fv-help-block'>\n              <span role='alert'>{formik.errors.password}</span>\n            </div>\n          </div>\n        )}\n      </div>\n      {/* end::Form group */}\n\n      {/* begin::Action */}\n      <div className='text-center'>\n        <button\n          type='submit'\n          id='kt_sign_in_submit'\n          className='btn btn-lg btn-primary w-100 mb-5'\n          disabled={formik.isSubmitting || !formik.isValid}\n        >\n          {!loading && <span className='indicator-label'>Tiếp tục</span>}\n          {loading && (\n            <span className='indicator-progress' style={{ display: 'block' }}>\n              Vui lòng chờ...\n              <span className='spinner-border spinner-border-sm align-middle ms-2'></span>\n            </span>\n          )}\n        </button>\n      </div>\n      {/* end::Action */}\n    </form>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}