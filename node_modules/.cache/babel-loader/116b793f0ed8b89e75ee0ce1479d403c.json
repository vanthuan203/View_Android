{"ast":null,"code":"import _objectSpread from\"C:/Users/KT2/Desktop/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/KT2/Desktop/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable jsx-a11y/anchor-is-valid */import{useState}from'react';import clsx from'clsx';import{toAbsoluteUrl,defaultMessages,defaultUserInfos,messageFromClient}from'../../helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var bufferMessages=defaultMessages;var ChatInner=function ChatInner(_ref){var _ref$isDrawer=_ref.isDrawer,isDrawer=_ref$isDrawer===void 0?false:_ref$isDrawer;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),chatUpdateFlag=_useState2[0],toggleChatUpdateFlat=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(bufferMessages),_useState6=_slicedToArray(_useState5,2),messages=_useState6[0],setMessages=_useState6[1];var _useState7=useState(defaultUserInfos),_useState8=_slicedToArray(_useState7,1),userInfos=_useState8[0];var sendMessage=function sendMessage(){var newMessage={user:2,type:'out',text:message,time:'Just now'};bufferMessages.push(newMessage);setMessages(bufferMessages);toggleChatUpdateFlat(!chatUpdateFlag);setMessage('');setTimeout(function(){bufferMessages.push(messageFromClient);setMessages(function(){return bufferMessages;});toggleChatUpdateFlat(function(flag){return!flag;});},1000);};var onEnterPress=function onEnterPress(e){if(e.keyCode===13&&e.shiftKey===false){e.preventDefault();sendMessage();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",id:isDrawer?'kt_drawer_chat_messenger_body':'kt_chat_messenger_body',children:[/*#__PURE__*/_jsx(\"div\",{className:clsx('scroll-y me-n5 pe-5',{'h-300px h-lg-auto':!isDrawer}),\"data-kt-element\":\"messages\",\"data-kt-scroll\":\"true\",\"data-kt-scroll-activate\":\"{default: false, lg: true}\",\"data-kt-scroll-max-height\":\"auto\",\"data-kt-scroll-dependencies\":isDrawer?'#kt_drawer_chat_messenger_header, #kt_drawer_chat_messenger_footer':'#kt_header, #kt_toolbar, #kt_footer, #kt_chat_messenger_header, #kt_chat_messenger_footer',\"data-kt-scroll-wrappers\":isDrawer?'#kt_drawer_chat_messenger_body':'#kt_content, #kt_chat_messenger_body',\"data-kt-scroll-offset\":isDrawer?'0px':'-2px',children:messages.map(function(message,index){var userInfo=userInfos[message.user];var state=message.type==='in'?'info':'primary';var templateAttr={};if(message.template){Object.defineProperty(templateAttr,'data-kt-element',{value:\"template-\".concat(message.type)});}var contentClass=\"\".concat(isDrawer?'':'d-flex',\" justify-content-\").concat(message.type==='in'?'start':'end',\" mb-10\");return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({className:clsx('d-flex',contentClass,'mb-10',{'d-none':message.template})},templateAttr),{},{children:/*#__PURE__*/_jsxs(\"div\",{className:clsx('d-flex flex-column align-items',\"align-items-\".concat(message.type==='in'?'start':'end')),children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center mb-2\",children:message.type==='in'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"symbol  symbol-35px symbol-circle \",children:/*#__PURE__*/_jsx(\"img\",{alt:\"Pic\",src:toAbsoluteUrl(\"/media/\".concat(userInfo.avatar))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ms-3\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"fs-5 fw-bolder text-gray-900 text-hover-primary me-1\",children:userInfo.name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-muted fs-7 mb-1\",children:message.time})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"me-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-muted fs-7 mb-1\",children:message.time}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"fs-5 fw-bolder text-gray-900 text-hover-primary ms-1\",children:\"You\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"symbol  symbol-35px symbol-circle \",children:/*#__PURE__*/_jsx(\"img\",{alt:\"Pic\",src:toAbsoluteUrl(\"/media/\".concat(userInfo.avatar))})})]})}),/*#__PURE__*/_jsx(\"div\",{className:clsx('p-5 rounded',\"bg-light-\".concat(state),'text-dark fw-bold mw-lg-400px',\"text-\".concat(message.type==='in'?'start':'end')),\"data-kt-element\":\"message-text\",dangerouslySetInnerHTML:{__html:message.text}})]})}),\"message\".concat(index));})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer pt-4\",id:isDrawer?'kt_drawer_chat_messenger_footer':'kt_chat_messenger_footer',children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control form-control-flush mb-3\",rows:1,\"data-kt-element\":\"input\",placeholder:\"Type a message\",value:message,onChange:function onChange(e){return setMessage(e.target.value);},onKeyDown:onEnterPress}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-stack\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center me-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-icon btn-active-light-primary me-1\",type:\"button\",\"data-bs-toggle\":\"tooltip\",title:\"Coming soon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-paperclip fs-3\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-icon btn-active-light-primary me-1\",type:\"button\",\"data-bs-toggle\":\"tooltip\",title:\"Coming soon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-upload fs-3\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",\"data-kt-element\":\"send\",onClick:sendMessage,children:\"Send\"})]})]})]});};export{ChatInner};","map":{"version":3,"names":["useState","clsx","toAbsoluteUrl","defaultMessages","defaultUserInfos","messageFromClient","bufferMessages","ChatInner","isDrawer","chatUpdateFlag","toggleChatUpdateFlat","message","setMessage","messages","setMessages","userInfos","sendMessage","newMessage","user","type","text","time","push","setTimeout","flag","onEnterPress","e","keyCode","shiftKey","preventDefault","map","index","userInfo","state","templateAttr","template","Object","defineProperty","value","contentClass","avatar","name","__html","target"],"sources":["C:/Users/KT2/Desktop/ssc.fe.cheatview-main/src/_metronic/partials/chat/ChatInner.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport {FC, useState} from 'react'\nimport clsx from 'clsx'\nimport {\n  toAbsoluteUrl,\n  defaultMessages,\n  defaultUserInfos,\n  MessageModel,\n  UserInfoModel,\n  messageFromClient,\n} from '../../helpers'\n\ntype Props = {\n  isDrawer?: boolean\n}\n\nconst bufferMessages = defaultMessages\n\nconst ChatInner: FC<Props> = ({isDrawer = false}) => {\n  const [chatUpdateFlag, toggleChatUpdateFlat] = useState<boolean>(false)\n  const [message, setMessage] = useState<string>('')\n  const [messages, setMessages] = useState<MessageModel[]>(bufferMessages)\n  const [userInfos] = useState<UserInfoModel[]>(defaultUserInfos)\n\n  const sendMessage = () => {\n    const newMessage: MessageModel = {\n      user: 2,\n      type: 'out',\n      text: message,\n      time: 'Just now',\n    }\n\n    bufferMessages.push(newMessage)\n    setMessages(bufferMessages)\n    toggleChatUpdateFlat(!chatUpdateFlag)\n    setMessage('')\n    setTimeout(() => {\n      bufferMessages.push(messageFromClient)\n      setMessages(() => bufferMessages)\n      toggleChatUpdateFlat((flag) => !flag)\n    }, 1000)\n  }\n\n  const onEnterPress = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.keyCode === 13 && e.shiftKey === false) {\n      e.preventDefault()\n      sendMessage()\n    }\n  }\n\n  return (\n    <div\n      className='card-body'\n      id={isDrawer ? 'kt_drawer_chat_messenger_body' : 'kt_chat_messenger_body'}\n    >\n      <div\n        className={clsx('scroll-y me-n5 pe-5', {'h-300px h-lg-auto': !isDrawer})}\n        data-kt-element='messages'\n        data-kt-scroll='true'\n        data-kt-scroll-activate='{default: false, lg: true}'\n        data-kt-scroll-max-height='auto'\n        data-kt-scroll-dependencies={\n          isDrawer\n            ? '#kt_drawer_chat_messenger_header, #kt_drawer_chat_messenger_footer'\n            : '#kt_header, #kt_toolbar, #kt_footer, #kt_chat_messenger_header, #kt_chat_messenger_footer'\n        }\n        data-kt-scroll-wrappers={\n          isDrawer ? '#kt_drawer_chat_messenger_body' : '#kt_content, #kt_chat_messenger_body'\n        }\n        data-kt-scroll-offset={isDrawer ? '0px' : '-2px'}\n      >\n        {messages.map((message, index) => {\n          const userInfo = userInfos[message.user]\n          const state = message.type === 'in' ? 'info' : 'primary'\n          const templateAttr = {}\n          if (message.template) {\n            Object.defineProperty(templateAttr, 'data-kt-element', {\n              value: `template-${message.type}`,\n            })\n          }\n          const contentClass = `${isDrawer ? '' : 'd-flex'} justify-content-${\n            message.type === 'in' ? 'start' : 'end'\n          } mb-10`\n          return (\n            <div\n              key={`message${index}`}\n              className={clsx('d-flex', contentClass, 'mb-10', {'d-none': message.template})}\n              {...templateAttr}\n            >\n              <div\n                className={clsx(\n                  'd-flex flex-column align-items',\n                  `align-items-${message.type === 'in' ? 'start' : 'end'}`\n                )}\n              >\n                <div className='d-flex align-items-center mb-2'>\n                  {message.type === 'in' ? (\n                    <>\n                      <div className='symbol  symbol-35px symbol-circle '>\n                        <img alt='Pic' src={toAbsoluteUrl(`/media/${userInfo.avatar}`)} />\n                      </div>\n                      <div className='ms-3'>\n                        <a\n                          href='#'\n                          className='fs-5 fw-bolder text-gray-900 text-hover-primary me-1'\n                        >\n                          {userInfo.name}\n                        </a>\n                        <span className='text-muted fs-7 mb-1'>{message.time}</span>\n                      </div>\n                    </>\n                  ) : (\n                    <>\n                      <div className='me-3'>\n                        <span className='text-muted fs-7 mb-1'>{message.time}</span>\n                        <a\n                          href='#'\n                          className='fs-5 fw-bolder text-gray-900 text-hover-primary ms-1'\n                        >\n                          You\n                        </a>\n                      </div>\n                      <div className='symbol  symbol-35px symbol-circle '>\n                        <img alt='Pic' src={toAbsoluteUrl(`/media/${userInfo.avatar}`)} />\n                      </div>\n                    </>\n                  )}\n                </div>\n\n                <div\n                  className={clsx(\n                    'p-5 rounded',\n                    `bg-light-${state}`,\n                    'text-dark fw-bold mw-lg-400px',\n                    `text-${message.type === 'in' ? 'start' : 'end'}`\n                  )}\n                  data-kt-element='message-text'\n                  dangerouslySetInnerHTML={{__html: message.text}}\n                ></div>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n\n      <div\n        className='card-footer pt-4'\n        id={isDrawer ? 'kt_drawer_chat_messenger_footer' : 'kt_chat_messenger_footer'}\n      >\n        <textarea\n          className='form-control form-control-flush mb-3'\n          rows={1}\n          data-kt-element='input'\n          placeholder='Type a message'\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          onKeyDown={onEnterPress}\n        ></textarea>\n\n        <div className='d-flex flex-stack'>\n          <div className='d-flex align-items-center me-2'>\n            <button\n              className='btn btn-sm btn-icon btn-active-light-primary me-1'\n              type='button'\n              data-bs-toggle='tooltip'\n              title='Coming soon'\n            >\n              <i className='bi bi-paperclip fs-3'></i>\n            </button>\n            <button\n              className='btn btn-sm btn-icon btn-active-light-primary me-1'\n              type='button'\n              data-bs-toggle='tooltip'\n              title='Coming soon'\n            >\n              <i className='bi bi-upload fs-3'></i>\n            </button>\n          </div>\n          <button\n            className='btn btn-primary'\n            type='button'\n            data-kt-element='send'\n            onClick={sendMessage}\n          >\n            Send\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport {ChatInner}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}