{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useImperativeHandle, useCallback } from 'react';\nimport kebabCase from 'lodash/kebabCase';\nimport trim from 'lodash/trim';\nimport isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\nimport omit from 'lodash/omit';\nimport find from 'lodash/find';\nimport { findNodeOfTree, filterNodesOfTree } from '../utils/treeUtils';\nimport { KEY_VALUES, useClassNames, shallowEqual, reactToString, placementPolyfill } from '../utils';\nimport { getHeight } from 'dom-lib';\nvar defaultNodeKeys = {\n  valueKey: 'value',\n  childrenKey: 'children'\n};\nexport function createConcatChildrenFunction(node, nodeValue, nodeKeys) {\n  if (nodeKeys === void 0) {\n    nodeKeys = defaultNodeKeys;\n  }\n\n  var _nodeKeys = nodeKeys,\n      valueKey = _nodeKeys.valueKey,\n      childrenKey = _nodeKeys.childrenKey;\n  return function (data, children) {\n    if (nodeValue) {\n      node = findNodeOfTree(data, function (item) {\n        return nodeValue === item[valueKey];\n      });\n    }\n\n    node[childrenKey] = children;\n    return data.concat([]);\n  };\n}\nexport function shouldDisplay(label, searchKeyword) {\n  if (!trim(searchKeyword)) {\n    return true;\n  }\n\n  var keyword = searchKeyword.toLocaleLowerCase();\n\n  if (typeof label === 'string' || typeof label === 'number') {\n    return (\"\" + label).toLocaleLowerCase().indexOf(keyword) >= 0;\n  } else if ( /*#__PURE__*/React.isValidElement(label)) {\n    var nodes = reactToString(label);\n    return nodes.join('').toLocaleLowerCase().indexOf(keyword) >= 0;\n  }\n\n  return false;\n}\n/**\n * The className of the assembled Toggle is on the Picker.\n */\n\nexport function usePickerClassName(props) {\n  var _withClassPrefix;\n\n  var name = props.name,\n      classPrefix = props.classPrefix,\n      className = props.className,\n      placement = props.placement,\n      appearance = props.appearance,\n      cleanable = props.cleanable,\n      block = props.block,\n      disabled = props.disabled,\n      countable = props.countable,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      hasValue = props.hasValue,\n      rest = _objectWithoutPropertiesLoose(props, [\"name\", \"classPrefix\", \"className\", \"placement\", \"appearance\", \"cleanable\", \"block\", \"disabled\", \"countable\", \"readOnly\", \"plaintext\", \"hasValue\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      withClassPrefix = _useClassNames.withClassPrefix,\n      merge = _useClassNames.merge;\n\n  var classes = merge(className, withClassPrefix(name, appearance, 'toggle-wrapper', (_withClassPrefix = {}, _withClassPrefix[\"placement-\" + kebabCase(placementPolyfill(placement))] = placement, _withClassPrefix['read-only'] = readOnly, _withClassPrefix['has-value'] = hasValue, _withClassPrefix.cleanable = cleanable, _withClassPrefix.block = block, _withClassPrefix.disabled = disabled, _withClassPrefix.countable = countable, _withClassPrefix.plaintext = plaintext, _withClassPrefix)));\n  var usedClassNamePropKeys = Object.keys(omit(props, [].concat(Object.keys(rest || {}), ['disabled', 'readOnly', 'plaintext'])));\n  return [classes, usedClassNamePropKeys];\n}\n/**\n * Handling keyboard events...\n * @param event Keyboard event object\n * @param events Event callback functions\n */\n\nexport function onMenuKeyDown(event, events) {\n  var down = events.down,\n      up = events.up,\n      enter = events.enter,\n      del = events.del,\n      esc = events.esc,\n      right = events.right,\n      left = events.left;\n\n  switch (event.key) {\n    // down\n    case KEY_VALUES.DOWN:\n      down === null || down === void 0 ? void 0 : down(event);\n      event.preventDefault();\n      break;\n    // up\n\n    case KEY_VALUES.UP:\n      up === null || up === void 0 ? void 0 : up(event);\n      event.preventDefault();\n      break;\n    // enter\n\n    case KEY_VALUES.ENTER:\n      enter === null || enter === void 0 ? void 0 : enter(event);\n      event.preventDefault();\n      break;\n    // delete\n\n    case KEY_VALUES.BACKSPACE:\n      del === null || del === void 0 ? void 0 : del(event);\n      break;\n    // esc | tab\n\n    case KEY_VALUES.ESC:\n    case KEY_VALUES.TAB:\n      esc === null || esc === void 0 ? void 0 : esc(event);\n      break;\n    // left arrow\n\n    case KEY_VALUES.LEFT:\n      left === null || left === void 0 ? void 0 : left(event);\n      break;\n    // right arrow\n\n    case KEY_VALUES.RIGHT:\n      right === null || right === void 0 ? void 0 : right(event);\n      break;\n\n    default:\n  }\n}\n/**\n * Checks if the element has a vertical scrollbar.\n */\n\nfunction hasVerticalScroll(element) {\n  var scrollHeight = element.scrollHeight,\n      clientHeight = element.clientHeight;\n  return scrollHeight > clientHeight;\n}\n/**\n * Checks if the element is within the visible area of the container\n */\n\n\nfunction isVisible(element, container, direction) {\n  if (!hasVerticalScroll(container)) {\n    return true;\n  }\n\n  var _element$getBoundingC = element.getBoundingClientRect(),\n      top = _element$getBoundingC.top,\n      bottom = _element$getBoundingC.bottom,\n      height = _element$getBoundingC.height;\n\n  var _container$getBoundin = container.getBoundingClientRect(),\n      containerTop = _container$getBoundin.top,\n      containerBottom = _container$getBoundin.bottom;\n\n  if (direction === 'top') {\n    return top + height > containerTop;\n  }\n\n  return bottom - height < containerBottom;\n}\n\nfunction scrollTo(container, direction, step) {\n  var scrollTop = container.scrollTop;\n  container.scrollTop = direction === 'top' ? scrollTop - step : scrollTop + step;\n}\n/**\n * A hook that manages the focus state of the option.\n * @param defaultFocusItemValue\n * @param props\n */\n\n\nexport var useFocusItemValue = function useFocusItemValue(defaultFocusItemValue, props) {\n  var _props$valueKey = props.valueKey,\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n      _props$focusableQuery = props.focusableQueryKey,\n      focusableQueryKey = _props$focusableQuery === void 0 ? '[data-key][aria-disabled=\"false\"]' : _props$focusableQuery,\n      _props$defaultLayer = props.defaultLayer,\n      defaultLayer = _props$defaultLayer === void 0 ? 0 : _props$defaultLayer,\n      data = props.data,\n      target = props.target,\n      rtl = props.rtl,\n      callback = props.callback;\n\n  var _useState = useState(defaultFocusItemValue),\n      focusItemValue = _useState[0],\n      setFocusItemValue = _useState[1];\n\n  var _useState2 = useState(defaultLayer),\n      layer = _useState2[0],\n      setLayer = _useState2[1];\n\n  var _useState3 = useState([]),\n      keys = _useState3[0],\n      setKeys = _useState3[1];\n\n  var getScrollContainer = useCallback(function () {\n    var menu = isFunction(target) ? target() : target; // For Cascader and MutiCascader\n\n    var subMenu = menu === null || menu === void 0 ? void 0 : menu.querySelector(\"[data-layer=\\\"\" + layer + \"\\\"]\");\n\n    if (subMenu) {\n      return subMenu;\n    } // For SelectPicker、CheckPicker、Autocomplete、InputPicker、TagPicker\n\n\n    return menu === null || menu === void 0 ? void 0 : menu.querySelector('[role=\"listbox\"]');\n  }, [layer, target]);\n  /**\n   * Get the elements visible in all options.\n   */\n\n  var getFocusableMenuItems = useCallback(function () {\n    if (!target) {\n      return [];\n    }\n\n    var currentKeys = keys;\n\n    if (layer < 1) {\n      var popup = isFunction(target) ? target() : target;\n      var rootMenu = popup === null || popup === void 0 ? void 0 : popup.querySelector('[data-layer=\"0\"]');\n\n      if (rootMenu) {\n        var _rootMenu$querySelect;\n\n        currentKeys = Array.from((_rootMenu$querySelect = rootMenu.querySelectorAll(focusableQueryKey)) !== null && _rootMenu$querySelect !== void 0 ? _rootMenu$querySelect : []).map(function (item) {\n          var _item$dataset;\n\n          return (_item$dataset = item.dataset) === null || _item$dataset === void 0 ? void 0 : _item$dataset.key;\n        });\n      } else {\n        var _popup$querySelectorA;\n\n        currentKeys = Array.from((_popup$querySelectorA = popup === null || popup === void 0 ? void 0 : popup.querySelectorAll(focusableQueryKey)) !== null && _popup$querySelectorA !== void 0 ? _popup$querySelectorA : []).map(function (item) {\n          var _item$dataset2;\n\n          return (_item$dataset2 = item.dataset) === null || _item$dataset2 === void 0 ? void 0 : _item$dataset2.key;\n        });\n      }\n    } // 1. It is necessary to traverse the `keys` instead of `data` here to preserve the order of the array.\n    // 2. The values ​​in `keys` are all string, so the corresponding value of `data` should also be converted to string\n\n\n    return currentKeys.map(function (key) {\n      return find(data, function (i) {\n        return \"\" + i[valueKey] === key;\n      });\n    });\n  }, [data, focusableQueryKey, keys, target, valueKey, layer]);\n  /**\n   * Get the index of the focus item.\n   */\n\n  var findFocusItemIndex = useCallback(function (callback) {\n    var items = getFocusableMenuItems();\n\n    for (var i = 0; i < items.length; i += 1) {\n      var _items$i;\n\n      if (shallowEqual(focusItemValue, (_items$i = items[i]) === null || _items$i === void 0 ? void 0 : _items$i[valueKey])) {\n        callback(items, i);\n        return;\n      }\n    }\n\n    callback(items, -1);\n  }, [focusItemValue, getFocusableMenuItems, valueKey]);\n  var scrollListItem = useCallback(function (direction, itemValue, willOverflow) {\n    var container = getScrollContainer();\n    var item = container === null || container === void 0 ? void 0 : container.querySelector(\"[data-key=\\\"\" + itemValue + \"\\\"]\");\n\n    if (willOverflow && container) {\n      var scrollHeight = container.scrollHeight,\n          clientHeight = container.clientHeight;\n      container.scrollTop = direction === 'top' ? scrollHeight - clientHeight : 0;\n      return;\n    }\n\n    if (item && container) {\n      if (!isVisible(item, container, direction)) {\n        var height = getHeight(item);\n        scrollTo(container, direction, height);\n      }\n    }\n  }, [getScrollContainer]);\n  var focusNextMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var willOverflow = index + 2 > items.length;\n      var nextIndex = willOverflow ? 0 : index + 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n        scrollListItem('bottom', focusItem[valueKey], willOverflow);\n      }\n    });\n  }, [callback, findFocusItemIndex, scrollListItem, valueKey]);\n  var focusPrevMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var willOverflow = index === 0;\n      var nextIndex = willOverflow ? items.length - 1 : index - 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n        scrollListItem('top', focusItem[valueKey], willOverflow);\n      }\n    });\n  }, [callback, findFocusItemIndex, scrollListItem, valueKey]);\n  var getSubMenuKeys = useCallback(function (nextLayer) {\n    var menu = isFunction(target) ? target() : target;\n    var subMenu = menu === null || menu === void 0 ? void 0 : menu.querySelector(\"[data-layer=\\\"\" + nextLayer + \"\\\"]\");\n\n    if (subMenu) {\n      var _Array$from;\n\n      return (_Array$from = Array.from(subMenu.querySelectorAll(focusableQueryKey))) === null || _Array$from === void 0 ? void 0 : _Array$from.map(function (item) {\n        var _item$dataset3;\n\n        return (_item$dataset3 = item.dataset) === null || _item$dataset3 === void 0 ? void 0 : _item$dataset3.key;\n      });\n    }\n\n    return null;\n  }, [focusableQueryKey, target]);\n  var focusNextLevelMenu = useCallback(function (event) {\n    var nextLayer = layer + 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      setFocusItemValue(nextKeys[0]);\n      callback === null || callback === void 0 ? void 0 : callback(nextKeys[0], event);\n    }\n  }, [callback, getSubMenuKeys, layer]);\n  var focusPrevLevelMenu = useCallback(function (event) {\n    var nextLayer = layer - 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      var _focusItem$parent;\n\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      var focusItem = findNodeOfTree(data, function (item) {\n        return item[valueKey] === focusItemValue;\n      });\n      var parentItemValue = focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey];\n\n      if (parentItemValue) {\n        setFocusItemValue(parentItemValue);\n        callback === null || callback === void 0 ? void 0 : callback(parentItemValue, event);\n      }\n    }\n  }, [callback, data, focusItemValue, getSubMenuKeys, layer, valueKey]);\n  var handleKeyDown = useCallback(function (event) {\n    var _onMenuKeyDown;\n\n    onMenuKeyDown(event, (_onMenuKeyDown = {\n      down: focusNextMenuItem,\n      up: focusPrevMenuItem\n    }, _onMenuKeyDown[rtl ? 'left' : 'right'] = focusNextLevelMenu, _onMenuKeyDown[rtl ? 'right' : 'left'] = focusPrevLevelMenu, _onMenuKeyDown));\n  }, [focusNextLevelMenu, focusNextMenuItem, focusPrevLevelMenu, focusPrevMenuItem, rtl]);\n  return {\n    focusItemValue: focusItemValue,\n    setFocusItemValue: setFocusItemValue,\n    layer: layer,\n    setLayer: setLayer,\n    keys: keys,\n    setKeys: setKeys,\n    onKeyDown: handleKeyDown\n  };\n};\n/**\n * A hook to control the toggle keyboard operation\n * @param props\n */\n\nexport var useToggleKeyDownEvent = function useToggleKeyDownEvent(props) {\n  var _props$toggle = props.toggle,\n      toggle = _props$toggle === void 0 ? true : _props$toggle,\n      triggerRef = props.triggerRef,\n      targetRef = props.targetRef,\n      overlayRef = props.overlayRef,\n      searchInputRef = props.searchInputRef,\n      active = props.active,\n      onExit = props.onExit,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      onKeyDown = props.onKeyDown,\n      onMenuKeyDown = props.onMenuKeyDown,\n      onMenuPressEnter = props.onMenuPressEnter,\n      onMenuPressBackspace = props.onMenuPressBackspace;\n  var handleClose = useCallback(function () {\n    var _triggerRef$current, _triggerRef$current$c;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose, triggerRef]);\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current2, _triggerRef$current2$;\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen, triggerRef]);\n  var handleToggleDropdown = useCallback(function () {\n    if (active) {\n      handleClose();\n      return;\n    }\n\n    handleOpen();\n  }, [active, handleOpen, handleClose]);\n  var onToggle = useCallback(function (event) {\n    if (event.target === (targetRef === null || targetRef === void 0 ? void 0 : targetRef.current)) {\n      // enter\n      if (toggle && event.key === KEY_VALUES.ENTER) {\n        handleToggleDropdown();\n      } // delete\n\n\n      if (event.key === KEY_VALUES.BACKSPACE) {\n        onExit === null || onExit === void 0 ? void 0 : onExit(event);\n      }\n    }\n\n    if (overlayRef !== null && overlayRef !== void 0 && overlayRef.current) {\n      // The keyboard operation callback on the menu.\n      onMenuKeyDown === null || onMenuKeyDown === void 0 ? void 0 : onMenuKeyDown(event);\n\n      if (event.key === KEY_VALUES.ENTER) {\n        onMenuPressEnter === null || onMenuPressEnter === void 0 ? void 0 : onMenuPressEnter(event);\n      }\n      /**\n       * There is no callback when typing the Backspace key in the search box.\n       * The default is to remove search keywords\n       */\n\n\n      if (event.key === KEY_VALUES.BACKSPACE && event.target !== (searchInputRef === null || searchInputRef === void 0 ? void 0 : searchInputRef.current)) {\n        onMenuPressBackspace === null || onMenuPressBackspace === void 0 ? void 0 : onMenuPressBackspace(event);\n      } // The search box gets focus when typing characters and numbers.\n\n\n      if (event.key.length === 1 && /\\w/.test(event.key)) {\n        var _event$target; // Exclude Input\n        // eg: <SelectPicker renderExtraFooter={() => <Input />} />\n\n\n        if (((_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.tagName) !== 'INPUT') {\n          var _searchInputRef$curre;\n\n          searchInputRef === null || searchInputRef === void 0 ? void 0 : (_searchInputRef$curre = searchInputRef.current) === null || _searchInputRef$curre === void 0 ? void 0 : _searchInputRef$curre.focus();\n        }\n      }\n    }\n\n    if (event.key === KEY_VALUES.ESC || event.key === KEY_VALUES.TAB) {\n      handleClose();\n    } // Native event callback\n\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n  }, [handleClose, handleToggleDropdown, overlayRef, onExit, onKeyDown, onMenuKeyDown, onMenuPressBackspace, onMenuPressEnter, toggle, targetRef, searchInputRef]);\n  return onToggle;\n};\n/**\n * A hook that handles search filter options\n * @param props\n */\n\nexport function useSearch(props) {\n  var labelKey = props.labelKey,\n      data = props.data,\n      searchBy = props.searchBy,\n      callback = props.callback; // Use search keywords to filter options.\n\n  var _useState4 = useState(''),\n      searchKeyword = _useState4[0],\n      setSearchKeyword = _useState4[1];\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n\n\n  var checkShouldDisplay = useCallback(function (item, keyword) {\n    var label = item === null || item === void 0 ? void 0 : item[labelKey];\n\n    var _keyword = isUndefined(keyword) ? searchKeyword : keyword;\n\n    if (typeof searchBy === 'function') {\n      return searchBy(_keyword, label, item);\n    }\n\n    return shouldDisplay(label, _keyword);\n  }, [labelKey, searchBy, searchKeyword]);\n  var updateFilteredData = useCallback(function (nextData) {\n    setFilteredData(filterNodesOfTree(nextData, function (item) {\n      return checkShouldDisplay(item);\n    }));\n  }, [checkShouldDisplay]);\n\n  var _useState5 = useState(filterNodesOfTree(data, function (item) {\n    return checkShouldDisplay(item);\n  })),\n      filteredData = _useState5[0],\n      setFilteredData = _useState5[1];\n\n  var handleSearch = function handleSearch(searchKeyword, event) {\n    var filteredData = filterNodesOfTree(data, function (item) {\n      return checkShouldDisplay(item, searchKeyword);\n    });\n    setFilteredData(filteredData);\n    setSearchKeyword(searchKeyword);\n    callback === null || callback === void 0 ? void 0 : callback(searchKeyword, filteredData, event);\n  };\n\n  return {\n    searchKeyword: searchKeyword,\n    filteredData: filteredData,\n    updateFilteredData: updateFilteredData,\n    setSearchKeyword: setSearchKeyword,\n    checkShouldDisplay: checkShouldDisplay,\n    handleSearch: handleSearch\n  };\n}\n/**\n * A hook of the exposed method of Picker\n */\n\nexport function usePublicMethods(ref, parmas) {\n  var triggerRef = parmas.triggerRef,\n      overlayRef = parmas.overlayRef,\n      targetRef = parmas.targetRef,\n      rootRef = parmas.rootRef,\n      listRef = parmas.listRef,\n      inline = parmas.inline;\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current3;\n\n    triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : _triggerRef$current3.open();\n  }, [triggerRef]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current4;\n\n    triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current4 = triggerRef.current) === null || _triggerRef$current4 === void 0 ? void 0 : _triggerRef$current4.close();\n  }, [triggerRef]);\n  var handleUpdatePosition = useCallback(function () {\n    var _triggerRef$current5;\n\n    triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current5 = triggerRef.current) === null || _triggerRef$current5 === void 0 ? void 0 : _triggerRef$current5.updatePosition();\n  }, [triggerRef]);\n  useImperativeHandle(ref, function () {\n    // Tree and CheckTree\n    if (inline) {\n      return {\n        get root() {\n          var _triggerRef$current$r, _triggerRef$current6;\n\n          return rootRef !== null && rootRef !== void 0 && rootRef.current ? rootRef === null || rootRef === void 0 ? void 0 : rootRef.current : (_triggerRef$current$r = triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current6 = triggerRef.current) === null || _triggerRef$current6 === void 0 ? void 0 : _triggerRef$current6.root) !== null && _triggerRef$current$r !== void 0 ? _triggerRef$current$r : null;\n        },\n\n        get list() {\n          if (!(listRef !== null && listRef !== void 0 && listRef.current)) {\n            throw new Error('The list is not found, please set `virtualized` for the component.');\n          }\n\n          return listRef === null || listRef === void 0 ? void 0 : listRef.current;\n        }\n\n      };\n    }\n\n    return {\n      get root() {\n        var _ref, _triggerRef$current7;\n\n        return (_ref = (rootRef === null || rootRef === void 0 ? void 0 : rootRef.current) || (triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current7 = triggerRef.current) === null || _triggerRef$current7 === void 0 ? void 0 : _triggerRef$current7.root)) !== null && _ref !== void 0 ? _ref : null;\n      },\n\n      get overlay() {\n        var _overlayRef$current;\n\n        if (!(overlayRef !== null && overlayRef !== void 0 && overlayRef.current)) {\n          throw new Error('The overlay is not found. Please confirm whether the picker is open.');\n        }\n\n        return (_overlayRef$current = overlayRef === null || overlayRef === void 0 ? void 0 : overlayRef.current) !== null && _overlayRef$current !== void 0 ? _overlayRef$current : null;\n      },\n\n      get target() {\n        var _targetRef$current;\n\n        return (_targetRef$current = targetRef === null || targetRef === void 0 ? void 0 : targetRef.current) !== null && _targetRef$current !== void 0 ? _targetRef$current : null;\n      },\n\n      get list() {\n        if (!(listRef !== null && listRef !== void 0 && listRef.current)) {\n          throw new Error(\"\\n            The list is not found.\\n            1.Please set virtualized for the component.\\n            2.Please confirm whether the picker is open.\\n          \");\n        }\n\n        return listRef === null || listRef === void 0 ? void 0 : listRef.current;\n      },\n\n      updatePosition: handleUpdatePosition,\n      open: handleOpen,\n      close: handleClose\n    };\n  });\n}","map":{"version":3,"names":["_objectWithoutPropertiesLoose","React","useState","useImperativeHandle","useCallback","kebabCase","trim","isFunction","isUndefined","omit","find","findNodeOfTree","filterNodesOfTree","KEY_VALUES","useClassNames","shallowEqual","reactToString","placementPolyfill","getHeight","defaultNodeKeys","valueKey","childrenKey","createConcatChildrenFunction","node","nodeValue","nodeKeys","_nodeKeys","data","children","item","concat","shouldDisplay","label","searchKeyword","keyword","toLocaleLowerCase","indexOf","isValidElement","nodes","join","usePickerClassName","props","_withClassPrefix","name","classPrefix","className","placement","appearance","cleanable","block","disabled","countable","readOnly","plaintext","hasValue","rest","_useClassNames","withClassPrefix","merge","classes","usedClassNamePropKeys","Object","keys","onMenuKeyDown","event","events","down","up","enter","del","esc","right","left","key","DOWN","preventDefault","UP","ENTER","BACKSPACE","ESC","TAB","LEFT","RIGHT","hasVerticalScroll","element","scrollHeight","clientHeight","isVisible","container","direction","_element$getBoundingC","getBoundingClientRect","top","bottom","height","_container$getBoundin","containerTop","containerBottom","scrollTo","step","scrollTop","useFocusItemValue","defaultFocusItemValue","_props$valueKey","_props$focusableQuery","focusableQueryKey","_props$defaultLayer","defaultLayer","target","rtl","callback","_useState","focusItemValue","setFocusItemValue","_useState2","layer","setLayer","_useState3","setKeys","getScrollContainer","menu","subMenu","querySelector","getFocusableMenuItems","currentKeys","popup","rootMenu","_rootMenu$querySelect","Array","from","querySelectorAll","map","_item$dataset","dataset","_popup$querySelectorA","_item$dataset2","i","findFocusItemIndex","items","length","_items$i","scrollListItem","itemValue","willOverflow","focusNextMenuItem","index","nextIndex","focusItem","focusPrevMenuItem","getSubMenuKeys","nextLayer","_Array$from","_item$dataset3","focusNextLevelMenu","nextKeys","focusPrevLevelMenu","_focusItem$parent","parentItemValue","parent","handleKeyDown","_onMenuKeyDown","onKeyDown","useToggleKeyDownEvent","_props$toggle","toggle","triggerRef","targetRef","overlayRef","searchInputRef","active","onExit","onOpen","onClose","onMenuPressEnter","onMenuPressBackspace","handleClose","_triggerRef$current","_triggerRef$current$c","current","close","call","handleOpen","_triggerRef$current2","_triggerRef$current2$","open","handleToggleDropdown","onToggle","test","_event$target","tagName","_searchInputRef$curre","focus","useSearch","labelKey","searchBy","_useState4","setSearchKeyword","checkShouldDisplay","_keyword","updateFilteredData","nextData","setFilteredData","_useState5","filteredData","handleSearch","usePublicMethods","ref","parmas","rootRef","listRef","inline","_triggerRef$current3","_triggerRef$current4","handleUpdatePosition","_triggerRef$current5","updatePosition","root","_triggerRef$current$r","_triggerRef$current6","list","Error","_ref","_triggerRef$current7","overlay","_overlayRef$current","_targetRef$current"],"sources":["C:/Users/KT2/OneDrive/Documents/Buffh/ssc.fe.cheatview-main/node_modules/rsuite/esm/Picker/utils.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useImperativeHandle, useCallback } from 'react';\nimport kebabCase from 'lodash/kebabCase';\nimport trim from 'lodash/trim';\nimport isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\nimport omit from 'lodash/omit';\nimport find from 'lodash/find';\nimport { findNodeOfTree, filterNodesOfTree } from '../utils/treeUtils';\nimport { KEY_VALUES, useClassNames, shallowEqual, reactToString, placementPolyfill } from '../utils';\nimport { getHeight } from 'dom-lib';\nvar defaultNodeKeys = {\n  valueKey: 'value',\n  childrenKey: 'children'\n};\nexport function createConcatChildrenFunction(node, nodeValue, nodeKeys) {\n  if (nodeKeys === void 0) {\n    nodeKeys = defaultNodeKeys;\n  }\n\n  var _nodeKeys = nodeKeys,\n      valueKey = _nodeKeys.valueKey,\n      childrenKey = _nodeKeys.childrenKey;\n  return function (data, children) {\n    if (nodeValue) {\n      node = findNodeOfTree(data, function (item) {\n        return nodeValue === item[valueKey];\n      });\n    }\n\n    node[childrenKey] = children;\n    return data.concat([]);\n  };\n}\nexport function shouldDisplay(label, searchKeyword) {\n  if (!trim(searchKeyword)) {\n    return true;\n  }\n\n  var keyword = searchKeyword.toLocaleLowerCase();\n\n  if (typeof label === 'string' || typeof label === 'number') {\n    return (\"\" + label).toLocaleLowerCase().indexOf(keyword) >= 0;\n  } else if ( /*#__PURE__*/React.isValidElement(label)) {\n    var nodes = reactToString(label);\n    return nodes.join('').toLocaleLowerCase().indexOf(keyword) >= 0;\n  }\n\n  return false;\n}\n\n/**\n * The className of the assembled Toggle is on the Picker.\n */\nexport function usePickerClassName(props) {\n  var _withClassPrefix;\n\n  var name = props.name,\n      classPrefix = props.classPrefix,\n      className = props.className,\n      placement = props.placement,\n      appearance = props.appearance,\n      cleanable = props.cleanable,\n      block = props.block,\n      disabled = props.disabled,\n      countable = props.countable,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      hasValue = props.hasValue,\n      rest = _objectWithoutPropertiesLoose(props, [\"name\", \"classPrefix\", \"className\", \"placement\", \"appearance\", \"cleanable\", \"block\", \"disabled\", \"countable\", \"readOnly\", \"plaintext\", \"hasValue\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      withClassPrefix = _useClassNames.withClassPrefix,\n      merge = _useClassNames.merge;\n\n  var classes = merge(className, withClassPrefix(name, appearance, 'toggle-wrapper', (_withClassPrefix = {}, _withClassPrefix[\"placement-\" + kebabCase(placementPolyfill(placement))] = placement, _withClassPrefix['read-only'] = readOnly, _withClassPrefix['has-value'] = hasValue, _withClassPrefix.cleanable = cleanable, _withClassPrefix.block = block, _withClassPrefix.disabled = disabled, _withClassPrefix.countable = countable, _withClassPrefix.plaintext = plaintext, _withClassPrefix)));\n  var usedClassNamePropKeys = Object.keys(omit(props, [].concat(Object.keys(rest || {}), ['disabled', 'readOnly', 'plaintext'])));\n  return [classes, usedClassNamePropKeys];\n}\n\n/**\n * Handling keyboard events...\n * @param event Keyboard event object\n * @param events Event callback functions\n */\nexport function onMenuKeyDown(event, events) {\n  var down = events.down,\n      up = events.up,\n      enter = events.enter,\n      del = events.del,\n      esc = events.esc,\n      right = events.right,\n      left = events.left;\n\n  switch (event.key) {\n    // down\n    case KEY_VALUES.DOWN:\n      down === null || down === void 0 ? void 0 : down(event);\n      event.preventDefault();\n      break;\n    // up\n\n    case KEY_VALUES.UP:\n      up === null || up === void 0 ? void 0 : up(event);\n      event.preventDefault();\n      break;\n    // enter\n\n    case KEY_VALUES.ENTER:\n      enter === null || enter === void 0 ? void 0 : enter(event);\n      event.preventDefault();\n      break;\n    // delete\n\n    case KEY_VALUES.BACKSPACE:\n      del === null || del === void 0 ? void 0 : del(event);\n      break;\n    // esc | tab\n\n    case KEY_VALUES.ESC:\n    case KEY_VALUES.TAB:\n      esc === null || esc === void 0 ? void 0 : esc(event);\n      break;\n    // left arrow\n\n    case KEY_VALUES.LEFT:\n      left === null || left === void 0 ? void 0 : left(event);\n      break;\n    // right arrow\n\n    case KEY_VALUES.RIGHT:\n      right === null || right === void 0 ? void 0 : right(event);\n      break;\n\n    default:\n  }\n}\n\n/**\n * Checks if the element has a vertical scrollbar.\n */\nfunction hasVerticalScroll(element) {\n  var scrollHeight = element.scrollHeight,\n      clientHeight = element.clientHeight;\n  return scrollHeight > clientHeight;\n}\n/**\n * Checks if the element is within the visible area of the container\n */\n\n\nfunction isVisible(element, container, direction) {\n  if (!hasVerticalScroll(container)) {\n    return true;\n  }\n\n  var _element$getBoundingC = element.getBoundingClientRect(),\n      top = _element$getBoundingC.top,\n      bottom = _element$getBoundingC.bottom,\n      height = _element$getBoundingC.height;\n\n  var _container$getBoundin = container.getBoundingClientRect(),\n      containerTop = _container$getBoundin.top,\n      containerBottom = _container$getBoundin.bottom;\n\n  if (direction === 'top') {\n    return top + height > containerTop;\n  }\n\n  return bottom - height < containerBottom;\n}\n\nfunction scrollTo(container, direction, step) {\n  var scrollTop = container.scrollTop;\n  container.scrollTop = direction === 'top' ? scrollTop - step : scrollTop + step;\n}\n/**\n * A hook that manages the focus state of the option.\n * @param defaultFocusItemValue\n * @param props\n */\n\n\nexport var useFocusItemValue = function useFocusItemValue(defaultFocusItemValue, props) {\n  var _props$valueKey = props.valueKey,\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n      _props$focusableQuery = props.focusableQueryKey,\n      focusableQueryKey = _props$focusableQuery === void 0 ? '[data-key][aria-disabled=\"false\"]' : _props$focusableQuery,\n      _props$defaultLayer = props.defaultLayer,\n      defaultLayer = _props$defaultLayer === void 0 ? 0 : _props$defaultLayer,\n      data = props.data,\n      target = props.target,\n      rtl = props.rtl,\n      callback = props.callback;\n\n  var _useState = useState(defaultFocusItemValue),\n      focusItemValue = _useState[0],\n      setFocusItemValue = _useState[1];\n\n  var _useState2 = useState(defaultLayer),\n      layer = _useState2[0],\n      setLayer = _useState2[1];\n\n  var _useState3 = useState([]),\n      keys = _useState3[0],\n      setKeys = _useState3[1];\n\n  var getScrollContainer = useCallback(function () {\n    var menu = isFunction(target) ? target() : target; // For Cascader and MutiCascader\n\n    var subMenu = menu === null || menu === void 0 ? void 0 : menu.querySelector(\"[data-layer=\\\"\" + layer + \"\\\"]\");\n\n    if (subMenu) {\n      return subMenu;\n    } // For SelectPicker、CheckPicker、Autocomplete、InputPicker、TagPicker\n\n\n    return menu === null || menu === void 0 ? void 0 : menu.querySelector('[role=\"listbox\"]');\n  }, [layer, target]);\n  /**\n   * Get the elements visible in all options.\n   */\n\n  var getFocusableMenuItems = useCallback(function () {\n    if (!target) {\n      return [];\n    }\n\n    var currentKeys = keys;\n\n    if (layer < 1) {\n      var popup = isFunction(target) ? target() : target;\n      var rootMenu = popup === null || popup === void 0 ? void 0 : popup.querySelector('[data-layer=\"0\"]');\n\n      if (rootMenu) {\n        var _rootMenu$querySelect;\n\n        currentKeys = Array.from((_rootMenu$querySelect = rootMenu.querySelectorAll(focusableQueryKey)) !== null && _rootMenu$querySelect !== void 0 ? _rootMenu$querySelect : []).map(function (item) {\n          var _item$dataset;\n\n          return (_item$dataset = item.dataset) === null || _item$dataset === void 0 ? void 0 : _item$dataset.key;\n        });\n      } else {\n        var _popup$querySelectorA;\n\n        currentKeys = Array.from((_popup$querySelectorA = popup === null || popup === void 0 ? void 0 : popup.querySelectorAll(focusableQueryKey)) !== null && _popup$querySelectorA !== void 0 ? _popup$querySelectorA : []).map(function (item) {\n          var _item$dataset2;\n\n          return (_item$dataset2 = item.dataset) === null || _item$dataset2 === void 0 ? void 0 : _item$dataset2.key;\n        });\n      }\n    } // 1. It is necessary to traverse the `keys` instead of `data` here to preserve the order of the array.\n    // 2. The values ​​in `keys` are all string, so the corresponding value of `data` should also be converted to string\n\n\n    return currentKeys.map(function (key) {\n      return find(data, function (i) {\n        return \"\" + i[valueKey] === key;\n      });\n    });\n  }, [data, focusableQueryKey, keys, target, valueKey, layer]);\n  /**\n   * Get the index of the focus item.\n   */\n\n  var findFocusItemIndex = useCallback(function (callback) {\n    var items = getFocusableMenuItems();\n\n    for (var i = 0; i < items.length; i += 1) {\n      var _items$i;\n\n      if (shallowEqual(focusItemValue, (_items$i = items[i]) === null || _items$i === void 0 ? void 0 : _items$i[valueKey])) {\n        callback(items, i);\n        return;\n      }\n    }\n\n    callback(items, -1);\n  }, [focusItemValue, getFocusableMenuItems, valueKey]);\n  var scrollListItem = useCallback(function (direction, itemValue, willOverflow) {\n    var container = getScrollContainer();\n    var item = container === null || container === void 0 ? void 0 : container.querySelector(\"[data-key=\\\"\" + itemValue + \"\\\"]\");\n\n    if (willOverflow && container) {\n      var scrollHeight = container.scrollHeight,\n          clientHeight = container.clientHeight;\n      container.scrollTop = direction === 'top' ? scrollHeight - clientHeight : 0;\n      return;\n    }\n\n    if (item && container) {\n      if (!isVisible(item, container, direction)) {\n        var height = getHeight(item);\n        scrollTo(container, direction, height);\n      }\n    }\n  }, [getScrollContainer]);\n  var focusNextMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var willOverflow = index + 2 > items.length;\n      var nextIndex = willOverflow ? 0 : index + 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n        scrollListItem('bottom', focusItem[valueKey], willOverflow);\n      }\n    });\n  }, [callback, findFocusItemIndex, scrollListItem, valueKey]);\n  var focusPrevMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var willOverflow = index === 0;\n      var nextIndex = willOverflow ? items.length - 1 : index - 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n        scrollListItem('top', focusItem[valueKey], willOverflow);\n      }\n    });\n  }, [callback, findFocusItemIndex, scrollListItem, valueKey]);\n  var getSubMenuKeys = useCallback(function (nextLayer) {\n    var menu = isFunction(target) ? target() : target;\n    var subMenu = menu === null || menu === void 0 ? void 0 : menu.querySelector(\"[data-layer=\\\"\" + nextLayer + \"\\\"]\");\n\n    if (subMenu) {\n      var _Array$from;\n\n      return (_Array$from = Array.from(subMenu.querySelectorAll(focusableQueryKey))) === null || _Array$from === void 0 ? void 0 : _Array$from.map(function (item) {\n        var _item$dataset3;\n\n        return (_item$dataset3 = item.dataset) === null || _item$dataset3 === void 0 ? void 0 : _item$dataset3.key;\n      });\n    }\n\n    return null;\n  }, [focusableQueryKey, target]);\n  var focusNextLevelMenu = useCallback(function (event) {\n    var nextLayer = layer + 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      setFocusItemValue(nextKeys[0]);\n      callback === null || callback === void 0 ? void 0 : callback(nextKeys[0], event);\n    }\n  }, [callback, getSubMenuKeys, layer]);\n  var focusPrevLevelMenu = useCallback(function (event) {\n    var nextLayer = layer - 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      var _focusItem$parent;\n\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      var focusItem = findNodeOfTree(data, function (item) {\n        return item[valueKey] === focusItemValue;\n      });\n      var parentItemValue = focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey];\n\n      if (parentItemValue) {\n        setFocusItemValue(parentItemValue);\n        callback === null || callback === void 0 ? void 0 : callback(parentItemValue, event);\n      }\n    }\n  }, [callback, data, focusItemValue, getSubMenuKeys, layer, valueKey]);\n  var handleKeyDown = useCallback(function (event) {\n    var _onMenuKeyDown;\n\n    onMenuKeyDown(event, (_onMenuKeyDown = {\n      down: focusNextMenuItem,\n      up: focusPrevMenuItem\n    }, _onMenuKeyDown[rtl ? 'left' : 'right'] = focusNextLevelMenu, _onMenuKeyDown[rtl ? 'right' : 'left'] = focusPrevLevelMenu, _onMenuKeyDown));\n  }, [focusNextLevelMenu, focusNextMenuItem, focusPrevLevelMenu, focusPrevMenuItem, rtl]);\n  return {\n    focusItemValue: focusItemValue,\n    setFocusItemValue: setFocusItemValue,\n    layer: layer,\n    setLayer: setLayer,\n    keys: keys,\n    setKeys: setKeys,\n    onKeyDown: handleKeyDown\n  };\n};\n\n/**\n * A hook to control the toggle keyboard operation\n * @param props\n */\nexport var useToggleKeyDownEvent = function useToggleKeyDownEvent(props) {\n  var _props$toggle = props.toggle,\n      toggle = _props$toggle === void 0 ? true : _props$toggle,\n      triggerRef = props.triggerRef,\n      targetRef = props.targetRef,\n      overlayRef = props.overlayRef,\n      searchInputRef = props.searchInputRef,\n      active = props.active,\n      onExit = props.onExit,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      onKeyDown = props.onKeyDown,\n      onMenuKeyDown = props.onMenuKeyDown,\n      onMenuPressEnter = props.onMenuPressEnter,\n      onMenuPressBackspace = props.onMenuPressBackspace;\n  var handleClose = useCallback(function () {\n    var _triggerRef$current, _triggerRef$current$c;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose, triggerRef]);\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current2, _triggerRef$current2$;\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen, triggerRef]);\n  var handleToggleDropdown = useCallback(function () {\n    if (active) {\n      handleClose();\n      return;\n    }\n\n    handleOpen();\n  }, [active, handleOpen, handleClose]);\n  var onToggle = useCallback(function (event) {\n    if (event.target === (targetRef === null || targetRef === void 0 ? void 0 : targetRef.current)) {\n      // enter\n      if (toggle && event.key === KEY_VALUES.ENTER) {\n        handleToggleDropdown();\n      } // delete\n\n\n      if (event.key === KEY_VALUES.BACKSPACE) {\n        onExit === null || onExit === void 0 ? void 0 : onExit(event);\n      }\n    }\n\n    if (overlayRef !== null && overlayRef !== void 0 && overlayRef.current) {\n      // The keyboard operation callback on the menu.\n      onMenuKeyDown === null || onMenuKeyDown === void 0 ? void 0 : onMenuKeyDown(event);\n\n      if (event.key === KEY_VALUES.ENTER) {\n        onMenuPressEnter === null || onMenuPressEnter === void 0 ? void 0 : onMenuPressEnter(event);\n      }\n      /**\n       * There is no callback when typing the Backspace key in the search box.\n       * The default is to remove search keywords\n       */\n\n\n      if (event.key === KEY_VALUES.BACKSPACE && event.target !== (searchInputRef === null || searchInputRef === void 0 ? void 0 : searchInputRef.current)) {\n        onMenuPressBackspace === null || onMenuPressBackspace === void 0 ? void 0 : onMenuPressBackspace(event);\n      } // The search box gets focus when typing characters and numbers.\n\n\n      if (event.key.length === 1 && /\\w/.test(event.key)) {\n        var _event$target;\n\n        // Exclude Input\n        // eg: <SelectPicker renderExtraFooter={() => <Input />} />\n        if (((_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.tagName) !== 'INPUT') {\n          var _searchInputRef$curre;\n\n          searchInputRef === null || searchInputRef === void 0 ? void 0 : (_searchInputRef$curre = searchInputRef.current) === null || _searchInputRef$curre === void 0 ? void 0 : _searchInputRef$curre.focus();\n        }\n      }\n    }\n\n    if (event.key === KEY_VALUES.ESC || event.key === KEY_VALUES.TAB) {\n      handleClose();\n    } // Native event callback\n\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n  }, [handleClose, handleToggleDropdown, overlayRef, onExit, onKeyDown, onMenuKeyDown, onMenuPressBackspace, onMenuPressEnter, toggle, targetRef, searchInputRef]);\n  return onToggle;\n};\n\n/**\n * A hook that handles search filter options\n * @param props\n */\nexport function useSearch(props) {\n  var labelKey = props.labelKey,\n      data = props.data,\n      searchBy = props.searchBy,\n      callback = props.callback; // Use search keywords to filter options.\n\n  var _useState4 = useState(''),\n      searchKeyword = _useState4[0],\n      setSearchKeyword = _useState4[1];\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n\n\n  var checkShouldDisplay = useCallback(function (item, keyword) {\n    var label = item === null || item === void 0 ? void 0 : item[labelKey];\n\n    var _keyword = isUndefined(keyword) ? searchKeyword : keyword;\n\n    if (typeof searchBy === 'function') {\n      return searchBy(_keyword, label, item);\n    }\n\n    return shouldDisplay(label, _keyword);\n  }, [labelKey, searchBy, searchKeyword]);\n  var updateFilteredData = useCallback(function (nextData) {\n    setFilteredData(filterNodesOfTree(nextData, function (item) {\n      return checkShouldDisplay(item);\n    }));\n  }, [checkShouldDisplay]);\n\n  var _useState5 = useState(filterNodesOfTree(data, function (item) {\n    return checkShouldDisplay(item);\n  })),\n      filteredData = _useState5[0],\n      setFilteredData = _useState5[1];\n\n  var handleSearch = function handleSearch(searchKeyword, event) {\n    var filteredData = filterNodesOfTree(data, function (item) {\n      return checkShouldDisplay(item, searchKeyword);\n    });\n    setFilteredData(filteredData);\n    setSearchKeyword(searchKeyword);\n    callback === null || callback === void 0 ? void 0 : callback(searchKeyword, filteredData, event);\n  };\n\n  return {\n    searchKeyword: searchKeyword,\n    filteredData: filteredData,\n    updateFilteredData: updateFilteredData,\n    setSearchKeyword: setSearchKeyword,\n    checkShouldDisplay: checkShouldDisplay,\n    handleSearch: handleSearch\n  };\n}\n\n/**\n * A hook of the exposed method of Picker\n */\nexport function usePublicMethods(ref, parmas) {\n  var triggerRef = parmas.triggerRef,\n      overlayRef = parmas.overlayRef,\n      targetRef = parmas.targetRef,\n      rootRef = parmas.rootRef,\n      listRef = parmas.listRef,\n      inline = parmas.inline;\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current3;\n\n    triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : _triggerRef$current3.open();\n  }, [triggerRef]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current4;\n\n    triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current4 = triggerRef.current) === null || _triggerRef$current4 === void 0 ? void 0 : _triggerRef$current4.close();\n  }, [triggerRef]);\n  var handleUpdatePosition = useCallback(function () {\n    var _triggerRef$current5;\n\n    triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current5 = triggerRef.current) === null || _triggerRef$current5 === void 0 ? void 0 : _triggerRef$current5.updatePosition();\n  }, [triggerRef]);\n  useImperativeHandle(ref, function () {\n    // Tree and CheckTree\n    if (inline) {\n      return {\n        get root() {\n          var _triggerRef$current$r, _triggerRef$current6;\n\n          return rootRef !== null && rootRef !== void 0 && rootRef.current ? rootRef === null || rootRef === void 0 ? void 0 : rootRef.current : (_triggerRef$current$r = triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current6 = triggerRef.current) === null || _triggerRef$current6 === void 0 ? void 0 : _triggerRef$current6.root) !== null && _triggerRef$current$r !== void 0 ? _triggerRef$current$r : null;\n        },\n\n        get list() {\n          if (!(listRef !== null && listRef !== void 0 && listRef.current)) {\n            throw new Error('The list is not found, please set `virtualized` for the component.');\n          }\n\n          return listRef === null || listRef === void 0 ? void 0 : listRef.current;\n        }\n\n      };\n    }\n\n    return {\n      get root() {\n        var _ref, _triggerRef$current7;\n\n        return (_ref = (rootRef === null || rootRef === void 0 ? void 0 : rootRef.current) || (triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current7 = triggerRef.current) === null || _triggerRef$current7 === void 0 ? void 0 : _triggerRef$current7.root)) !== null && _ref !== void 0 ? _ref : null;\n      },\n\n      get overlay() {\n        var _overlayRef$current;\n\n        if (!(overlayRef !== null && overlayRef !== void 0 && overlayRef.current)) {\n          throw new Error('The overlay is not found. Please confirm whether the picker is open.');\n        }\n\n        return (_overlayRef$current = overlayRef === null || overlayRef === void 0 ? void 0 : overlayRef.current) !== null && _overlayRef$current !== void 0 ? _overlayRef$current : null;\n      },\n\n      get target() {\n        var _targetRef$current;\n\n        return (_targetRef$current = targetRef === null || targetRef === void 0 ? void 0 : targetRef.current) !== null && _targetRef$current !== void 0 ? _targetRef$current : null;\n      },\n\n      get list() {\n        if (!(listRef !== null && listRef !== void 0 && listRef.current)) {\n          throw new Error(\"\\n            The list is not found.\\n            1.Please set virtualized for the component.\\n            2.Please confirm whether the picker is open.\\n          \");\n        }\n\n        return listRef === null || listRef === void 0 ? void 0 : listRef.current;\n      },\n\n      updatePosition: handleUpdatePosition,\n      open: handleOpen,\n      close: handleClose\n    };\n  });\n}"],"mappings":"AAAA,OAAOA,6BAAP,MAA0C,yDAA1C;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,mBAA1B,EAA+CC,WAA/C,QAAkE,OAAlE;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,SAASC,cAAT,EAAyBC,iBAAzB,QAAkD,oBAAlD;AACA,SAASC,UAAT,EAAqBC,aAArB,EAAoCC,YAApC,EAAkDC,aAAlD,EAAiEC,iBAAjE,QAA0F,UAA1F;AACA,SAASC,SAAT,QAA0B,SAA1B;AACA,IAAIC,eAAe,GAAG;EACpBC,QAAQ,EAAE,OADU;EAEpBC,WAAW,EAAE;AAFO,CAAtB;AAIA,OAAO,SAASC,4BAAT,CAAsCC,IAAtC,EAA4CC,SAA5C,EAAuDC,QAAvD,EAAiE;EACtE,IAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;IACvBA,QAAQ,GAAGN,eAAX;EACD;;EAED,IAAIO,SAAS,GAAGD,QAAhB;EAAA,IACIL,QAAQ,GAAGM,SAAS,CAACN,QADzB;EAAA,IAEIC,WAAW,GAAGK,SAAS,CAACL,WAF5B;EAGA,OAAO,UAAUM,IAAV,EAAgBC,QAAhB,EAA0B;IAC/B,IAAIJ,SAAJ,EAAe;MACbD,IAAI,GAAGZ,cAAc,CAACgB,IAAD,EAAO,UAAUE,IAAV,EAAgB;QAC1C,OAAOL,SAAS,KAAKK,IAAI,CAACT,QAAD,CAAzB;MACD,CAFoB,CAArB;IAGD;;IAEDG,IAAI,CAACF,WAAD,CAAJ,GAAoBO,QAApB;IACA,OAAOD,IAAI,CAACG,MAAL,CAAY,EAAZ,CAAP;EACD,CATD;AAUD;AACD,OAAO,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,aAA9B,EAA6C;EAClD,IAAI,CAAC3B,IAAI,CAAC2B,aAAD,CAAT,EAA0B;IACxB,OAAO,IAAP;EACD;;EAED,IAAIC,OAAO,GAAGD,aAAa,CAACE,iBAAd,EAAd;;EAEA,IAAI,OAAOH,KAAP,KAAiB,QAAjB,IAA6B,OAAOA,KAAP,KAAiB,QAAlD,EAA4D;IAC1D,OAAO,CAAC,KAAKA,KAAN,EAAaG,iBAAb,GAAiCC,OAAjC,CAAyCF,OAAzC,KAAqD,CAA5D;EACD,CAFD,MAEO,KAAK,aAAajC,KAAK,CAACoC,cAAN,CAAqBL,KAArB,CAAlB,EAA+C;IACpD,IAAIM,KAAK,GAAGtB,aAAa,CAACgB,KAAD,CAAzB;IACA,OAAOM,KAAK,CAACC,IAAN,CAAW,EAAX,EAAeJ,iBAAf,GAAmCC,OAAnC,CAA2CF,OAA3C,KAAuD,CAA9D;EACD;;EAED,OAAO,KAAP;AACD;AAED;AACA;AACA;;AACA,OAAO,SAASM,kBAAT,CAA4BC,KAA5B,EAAmC;EACxC,IAAIC,gBAAJ;;EAEA,IAAIC,IAAI,GAAGF,KAAK,CAACE,IAAjB;EAAA,IACIC,WAAW,GAAGH,KAAK,CAACG,WADxB;EAAA,IAEIC,SAAS,GAAGJ,KAAK,CAACI,SAFtB;EAAA,IAGIC,SAAS,GAAGL,KAAK,CAACK,SAHtB;EAAA,IAIIC,UAAU,GAAGN,KAAK,CAACM,UAJvB;EAAA,IAKIC,SAAS,GAAGP,KAAK,CAACO,SALtB;EAAA,IAMIC,KAAK,GAAGR,KAAK,CAACQ,KANlB;EAAA,IAOIC,QAAQ,GAAGT,KAAK,CAACS,QAPrB;EAAA,IAQIC,SAAS,GAAGV,KAAK,CAACU,SARtB;EAAA,IASIC,QAAQ,GAAGX,KAAK,CAACW,QATrB;EAAA,IAUIC,SAAS,GAAGZ,KAAK,CAACY,SAVtB;EAAA,IAWIC,QAAQ,GAAGb,KAAK,CAACa,QAXrB;EAAA,IAYIC,IAAI,GAAGvD,6BAA6B,CAACyC,KAAD,EAAQ,CAAC,MAAD,EAAS,aAAT,EAAwB,WAAxB,EAAqC,WAArC,EAAkD,YAAlD,EAAgE,WAAhE,EAA6E,OAA7E,EAAsF,UAAtF,EAAkG,WAAlG,EAA+G,UAA/G,EAA2H,WAA3H,EAAwI,UAAxI,CAAR,CAZxC;;EAcA,IAAIe,cAAc,GAAG1C,aAAa,CAAC8B,WAAD,CAAlC;EAAA,IACIa,eAAe,GAAGD,cAAc,CAACC,eADrC;EAAA,IAEIC,KAAK,GAAGF,cAAc,CAACE,KAF3B;;EAIA,IAAIC,OAAO,GAAGD,KAAK,CAACb,SAAD,EAAYY,eAAe,CAACd,IAAD,EAAOI,UAAP,EAAmB,gBAAnB,GAAsCL,gBAAgB,GAAG,EAAnB,EAAuBA,gBAAgB,CAAC,eAAerC,SAAS,CAACY,iBAAiB,CAAC6B,SAAD,CAAlB,CAAzB,CAAhB,GAA2EA,SAAlG,EAA6GJ,gBAAgB,CAAC,WAAD,CAAhB,GAAgCU,QAA7I,EAAuJV,gBAAgB,CAAC,WAAD,CAAhB,GAAgCY,QAAvL,EAAiMZ,gBAAgB,CAACM,SAAjB,GAA6BA,SAA9N,EAAyON,gBAAgB,CAACO,KAAjB,GAAyBA,KAAlQ,EAAyQP,gBAAgB,CAACQ,QAAjB,GAA4BA,QAArS,EAA+SR,gBAAgB,CAACS,SAAjB,GAA6BA,SAA5U,EAAuVT,gBAAgB,CAACW,SAAjB,GAA6BA,SAApX,EAA+XX,gBAAra,EAA3B,CAAnB;EACA,IAAIkB,qBAAqB,GAAGC,MAAM,CAACC,IAAP,CAAYrD,IAAI,CAACgC,KAAD,EAAQ,GAAGX,MAAH,CAAU+B,MAAM,CAACC,IAAP,CAAYP,IAAI,IAAI,EAApB,CAAV,EAAmC,CAAC,UAAD,EAAa,UAAb,EAAyB,WAAzB,CAAnC,CAAR,CAAhB,CAA5B;EACA,OAAO,CAACI,OAAD,EAAUC,qBAAV,CAAP;AACD;AAED;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASG,aAAT,CAAuBC,KAAvB,EAA8BC,MAA9B,EAAsC;EAC3C,IAAIC,IAAI,GAAGD,MAAM,CAACC,IAAlB;EAAA,IACIC,EAAE,GAAGF,MAAM,CAACE,EADhB;EAAA,IAEIC,KAAK,GAAGH,MAAM,CAACG,KAFnB;EAAA,IAGIC,GAAG,GAAGJ,MAAM,CAACI,GAHjB;EAAA,IAIIC,GAAG,GAAGL,MAAM,CAACK,GAJjB;EAAA,IAKIC,KAAK,GAAGN,MAAM,CAACM,KALnB;EAAA,IAMIC,IAAI,GAAGP,MAAM,CAACO,IANlB;;EAQA,QAAQR,KAAK,CAACS,GAAd;IACE;IACA,KAAK5D,UAAU,CAAC6D,IAAhB;MACER,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACF,KAAD,CAAhD;MACAA,KAAK,CAACW,cAAN;MACA;IACF;;IAEA,KAAK9D,UAAU,CAAC+D,EAAhB;MACET,EAAE,KAAK,IAAP,IAAeA,EAAE,KAAK,KAAK,CAA3B,GAA+B,KAAK,CAApC,GAAwCA,EAAE,CAACH,KAAD,CAA1C;MACAA,KAAK,CAACW,cAAN;MACA;IACF;;IAEA,KAAK9D,UAAU,CAACgE,KAAhB;MACET,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACJ,KAAD,CAAnD;MACAA,KAAK,CAACW,cAAN;MACA;IACF;;IAEA,KAAK9D,UAAU,CAACiE,SAAhB;MACET,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACL,KAAD,CAA7C;MACA;IACF;;IAEA,KAAKnD,UAAU,CAACkE,GAAhB;IACA,KAAKlE,UAAU,CAACmE,GAAhB;MACEV,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAACN,KAAD,CAA7C;MACA;IACF;;IAEA,KAAKnD,UAAU,CAACoE,IAAhB;MACET,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACR,KAAD,CAAhD;MACA;IACF;;IAEA,KAAKnD,UAAU,CAACqE,KAAhB;MACEX,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACP,KAAD,CAAnD;MACA;;IAEF;EAxCF;AA0CD;AAED;AACA;AACA;;AACA,SAASmB,iBAAT,CAA2BC,OAA3B,EAAoC;EAClC,IAAIC,YAAY,GAAGD,OAAO,CAACC,YAA3B;EAAA,IACIC,YAAY,GAAGF,OAAO,CAACE,YAD3B;EAEA,OAAOD,YAAY,GAAGC,YAAtB;AACD;AACD;AACA;AACA;;;AAGA,SAASC,SAAT,CAAmBH,OAAnB,EAA4BI,SAA5B,EAAuCC,SAAvC,EAAkD;EAChD,IAAI,CAACN,iBAAiB,CAACK,SAAD,CAAtB,EAAmC;IACjC,OAAO,IAAP;EACD;;EAED,IAAIE,qBAAqB,GAAGN,OAAO,CAACO,qBAAR,EAA5B;EAAA,IACIC,GAAG,GAAGF,qBAAqB,CAACE,GADhC;EAAA,IAEIC,MAAM,GAAGH,qBAAqB,CAACG,MAFnC;EAAA,IAGIC,MAAM,GAAGJ,qBAAqB,CAACI,MAHnC;;EAKA,IAAIC,qBAAqB,GAAGP,SAAS,CAACG,qBAAV,EAA5B;EAAA,IACIK,YAAY,GAAGD,qBAAqB,CAACH,GADzC;EAAA,IAEIK,eAAe,GAAGF,qBAAqB,CAACF,MAF5C;;EAIA,IAAIJ,SAAS,KAAK,KAAlB,EAAyB;IACvB,OAAOG,GAAG,GAAGE,MAAN,GAAeE,YAAtB;EACD;;EAED,OAAOH,MAAM,GAAGC,MAAT,GAAkBG,eAAzB;AACD;;AAED,SAASC,QAAT,CAAkBV,SAAlB,EAA6BC,SAA7B,EAAwCU,IAAxC,EAA8C;EAC5C,IAAIC,SAAS,GAAGZ,SAAS,CAACY,SAA1B;EACAZ,SAAS,CAACY,SAAV,GAAsBX,SAAS,KAAK,KAAd,GAAsBW,SAAS,GAAGD,IAAlC,GAAyCC,SAAS,GAAGD,IAA3E;AACD;AACD;AACA;AACA;AACA;AACA;;;AAGA,OAAO,IAAIE,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,qBAA3B,EAAkD7D,KAAlD,EAAyD;EACtF,IAAI8D,eAAe,GAAG9D,KAAK,CAACrB,QAA5B;EAAA,IACIA,QAAQ,GAAGmF,eAAe,KAAK,KAAK,CAAzB,GAA6B,OAA7B,GAAuCA,eADtD;EAAA,IAEIC,qBAAqB,GAAG/D,KAAK,CAACgE,iBAFlC;EAAA,IAGIA,iBAAiB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,mCAAnC,GAAyEA,qBAHjG;EAAA,IAIIE,mBAAmB,GAAGjE,KAAK,CAACkE,YAJhC;EAAA,IAKIA,YAAY,GAAGD,mBAAmB,KAAK,KAAK,CAA7B,GAAiC,CAAjC,GAAqCA,mBALxD;EAAA,IAMI/E,IAAI,GAAGc,KAAK,CAACd,IANjB;EAAA,IAOIiF,MAAM,GAAGnE,KAAK,CAACmE,MAPnB;EAAA,IAQIC,GAAG,GAAGpE,KAAK,CAACoE,GARhB;EAAA,IASIC,QAAQ,GAAGrE,KAAK,CAACqE,QATrB;;EAWA,IAAIC,SAAS,GAAG7G,QAAQ,CAACoG,qBAAD,CAAxB;EAAA,IACIU,cAAc,GAAGD,SAAS,CAAC,CAAD,CAD9B;EAAA,IAEIE,iBAAiB,GAAGF,SAAS,CAAC,CAAD,CAFjC;;EAIA,IAAIG,UAAU,GAAGhH,QAAQ,CAACyG,YAAD,CAAzB;EAAA,IACIQ,KAAK,GAAGD,UAAU,CAAC,CAAD,CADtB;EAAA,IAEIE,QAAQ,GAAGF,UAAU,CAAC,CAAD,CAFzB;;EAIA,IAAIG,UAAU,GAAGnH,QAAQ,CAAC,EAAD,CAAzB;EAAA,IACI4D,IAAI,GAAGuD,UAAU,CAAC,CAAD,CADrB;EAAA,IAEIC,OAAO,GAAGD,UAAU,CAAC,CAAD,CAFxB;;EAIA,IAAIE,kBAAkB,GAAGnH,WAAW,CAAC,YAAY;IAC/C,IAAIoH,IAAI,GAAGjH,UAAU,CAACqG,MAAD,CAAV,GAAqBA,MAAM,EAA3B,GAAgCA,MAA3C,CAD+C,CACI;;IAEnD,IAAIa,OAAO,GAAGD,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACE,aAAL,CAAmB,mBAAmBP,KAAnB,GAA2B,KAA9C,CAA1D;;IAEA,IAAIM,OAAJ,EAAa;MACX,OAAOA,OAAP;IACD,CAP8C,CAO7C;;;IAGF,OAAOD,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACE,aAAL,CAAmB,kBAAnB,CAAnD;EACD,CAXmC,EAWjC,CAACP,KAAD,EAAQP,MAAR,CAXiC,CAApC;EAYA;AACF;AACA;;EAEE,IAAIe,qBAAqB,GAAGvH,WAAW,CAAC,YAAY;IAClD,IAAI,CAACwG,MAAL,EAAa;MACX,OAAO,EAAP;IACD;;IAED,IAAIgB,WAAW,GAAG9D,IAAlB;;IAEA,IAAIqD,KAAK,GAAG,CAAZ,EAAe;MACb,IAAIU,KAAK,GAAGtH,UAAU,CAACqG,MAAD,CAAV,GAAqBA,MAAM,EAA3B,GAAgCA,MAA5C;MACA,IAAIkB,QAAQ,GAAGD,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACH,aAAN,CAAoB,kBAApB,CAA7D;;MAEA,IAAII,QAAJ,EAAc;QACZ,IAAIC,qBAAJ;;QAEAH,WAAW,GAAGI,KAAK,CAACC,IAAN,CAAW,CAACF,qBAAqB,GAAGD,QAAQ,CAACI,gBAAT,CAA0BzB,iBAA1B,CAAzB,MAA2E,IAA3E,IAAmFsB,qBAAqB,KAAK,KAAK,CAAlH,GAAsHA,qBAAtH,GAA8I,EAAzJ,EAA6JI,GAA7J,CAAiK,UAAUtG,IAAV,EAAgB;UAC7L,IAAIuG,aAAJ;;UAEA,OAAO,CAACA,aAAa,GAAGvG,IAAI,CAACwG,OAAtB,MAAmC,IAAnC,IAA2CD,aAAa,KAAK,KAAK,CAAlE,GAAsE,KAAK,CAA3E,GAA+EA,aAAa,CAAC3D,GAApG;QACD,CAJa,CAAd;MAKD,CARD,MAQO;QACL,IAAI6D,qBAAJ;;QAEAV,WAAW,GAAGI,KAAK,CAACC,IAAN,CAAW,CAACK,qBAAqB,GAAGT,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACK,gBAAN,CAAuBzB,iBAAvB,CAAvE,MAAsH,IAAtH,IAA8H6B,qBAAqB,KAAK,KAAK,CAA7J,GAAiKA,qBAAjK,GAAyL,EAApM,EAAwMH,GAAxM,CAA4M,UAAUtG,IAAV,EAAgB;UACxO,IAAI0G,cAAJ;;UAEA,OAAO,CAACA,cAAc,GAAG1G,IAAI,CAACwG,OAAvB,MAAoC,IAApC,IAA4CE,cAAc,KAAK,KAAK,CAApE,GAAwE,KAAK,CAA7E,GAAiFA,cAAc,CAAC9D,GAAvG;QACD,CAJa,CAAd;MAKD;IACF,CA5BiD,CA4BhD;IACF;;;IAGA,OAAOmD,WAAW,CAACO,GAAZ,CAAgB,UAAU1D,GAAV,EAAe;MACpC,OAAO/D,IAAI,CAACiB,IAAD,EAAO,UAAU6G,CAAV,EAAa;QAC7B,OAAO,KAAKA,CAAC,CAACpH,QAAD,CAAN,KAAqBqD,GAA5B;MACD,CAFU,CAAX;IAGD,CAJM,CAAP;EAKD,CArCsC,EAqCpC,CAAC9C,IAAD,EAAO8E,iBAAP,EAA0B3C,IAA1B,EAAgC8C,MAAhC,EAAwCxF,QAAxC,EAAkD+F,KAAlD,CArCoC,CAAvC;EAsCA;AACF;AACA;;EAEE,IAAIsB,kBAAkB,GAAGrI,WAAW,CAAC,UAAU0G,QAAV,EAAoB;IACvD,IAAI4B,KAAK,GAAGf,qBAAqB,EAAjC;;IAEA,KAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,KAAK,CAACC,MAA1B,EAAkCH,CAAC,IAAI,CAAvC,EAA0C;MACxC,IAAII,QAAJ;;MAEA,IAAI7H,YAAY,CAACiG,cAAD,EAAiB,CAAC4B,QAAQ,GAAGF,KAAK,CAACF,CAAD,CAAjB,MAA0B,IAA1B,IAAkCI,QAAQ,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,QAAQ,CAACxH,QAAD,CAA1F,CAAhB,EAAuH;QACrH0F,QAAQ,CAAC4B,KAAD,EAAQF,CAAR,CAAR;QACA;MACD;IACF;;IAED1B,QAAQ,CAAC4B,KAAD,EAAQ,CAAC,CAAT,CAAR;EACD,CAbmC,EAajC,CAAC1B,cAAD,EAAiBW,qBAAjB,EAAwCvG,QAAxC,CAbiC,CAApC;EAcA,IAAIyH,cAAc,GAAGzI,WAAW,CAAC,UAAUqF,SAAV,EAAqBqD,SAArB,EAAgCC,YAAhC,EAA8C;IAC7E,IAAIvD,SAAS,GAAG+B,kBAAkB,EAAlC;IACA,IAAI1F,IAAI,GAAG2D,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAACkC,aAAV,CAAwB,iBAAiBoB,SAAjB,GAA6B,KAArD,CAAjE;;IAEA,IAAIC,YAAY,IAAIvD,SAApB,EAA+B;MAC7B,IAAIH,YAAY,GAAGG,SAAS,CAACH,YAA7B;MAAA,IACIC,YAAY,GAAGE,SAAS,CAACF,YAD7B;MAEAE,SAAS,CAACY,SAAV,GAAsBX,SAAS,KAAK,KAAd,GAAsBJ,YAAY,GAAGC,YAArC,GAAoD,CAA1E;MACA;IACD;;IAED,IAAIzD,IAAI,IAAI2D,SAAZ,EAAuB;MACrB,IAAI,CAACD,SAAS,CAAC1D,IAAD,EAAO2D,SAAP,EAAkBC,SAAlB,CAAd,EAA4C;QAC1C,IAAIK,MAAM,GAAG5E,SAAS,CAACW,IAAD,CAAtB;QACAqE,QAAQ,CAACV,SAAD,EAAYC,SAAZ,EAAuBK,MAAvB,CAAR;MACD;IACF;EACF,CAjB+B,EAiB7B,CAACyB,kBAAD,CAjB6B,CAAhC;EAkBA,IAAIyB,iBAAiB,GAAG5I,WAAW,CAAC,UAAU4D,KAAV,EAAiB;IACnDyE,kBAAkB,CAAC,UAAUC,KAAV,EAAiBO,KAAjB,EAAwB;MACzC,IAAIF,YAAY,GAAGE,KAAK,GAAG,CAAR,GAAYP,KAAK,CAACC,MAArC;MACA,IAAIO,SAAS,GAAGH,YAAY,GAAG,CAAH,GAAOE,KAAK,GAAG,CAA3C;MACA,IAAIE,SAAS,GAAGT,KAAK,CAACQ,SAAD,CAArB;;MAEA,IAAI,CAAC1I,WAAW,CAAC2I,SAAD,CAAhB,EAA6B;QAC3BlC,iBAAiB,CAACkC,SAAS,CAAC/H,QAAD,CAAV,CAAjB;QACA0F,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACqC,SAAS,CAAC/H,QAAD,CAAV,EAAsB4C,KAAtB,CAA5D;QACA6E,cAAc,CAAC,QAAD,EAAWM,SAAS,CAAC/H,QAAD,CAApB,EAAgC2H,YAAhC,CAAd;MACD;IACF,CAViB,CAAlB;EAWD,CAZkC,EAYhC,CAACjC,QAAD,EAAW2B,kBAAX,EAA+BI,cAA/B,EAA+CzH,QAA/C,CAZgC,CAAnC;EAaA,IAAIgI,iBAAiB,GAAGhJ,WAAW,CAAC,UAAU4D,KAAV,EAAiB;IACnDyE,kBAAkB,CAAC,UAAUC,KAAV,EAAiBO,KAAjB,EAAwB;MACzC,IAAIF,YAAY,GAAGE,KAAK,KAAK,CAA7B;MACA,IAAIC,SAAS,GAAGH,YAAY,GAAGL,KAAK,CAACC,MAAN,GAAe,CAAlB,GAAsBM,KAAK,GAAG,CAA1D;MACA,IAAIE,SAAS,GAAGT,KAAK,CAACQ,SAAD,CAArB;;MAEA,IAAI,CAAC1I,WAAW,CAAC2I,SAAD,CAAhB,EAA6B;QAC3BlC,iBAAiB,CAACkC,SAAS,CAAC/H,QAAD,CAAV,CAAjB;QACA0F,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACqC,SAAS,CAAC/H,QAAD,CAAV,EAAsB4C,KAAtB,CAA5D;QACA6E,cAAc,CAAC,KAAD,EAAQM,SAAS,CAAC/H,QAAD,CAAjB,EAA6B2H,YAA7B,CAAd;MACD;IACF,CAViB,CAAlB;EAWD,CAZkC,EAYhC,CAACjC,QAAD,EAAW2B,kBAAX,EAA+BI,cAA/B,EAA+CzH,QAA/C,CAZgC,CAAnC;EAaA,IAAIiI,cAAc,GAAGjJ,WAAW,CAAC,UAAUkJ,SAAV,EAAqB;IACpD,IAAI9B,IAAI,GAAGjH,UAAU,CAACqG,MAAD,CAAV,GAAqBA,MAAM,EAA3B,GAAgCA,MAA3C;IACA,IAAIa,OAAO,GAAGD,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACE,aAAL,CAAmB,mBAAmB4B,SAAnB,GAA+B,KAAlD,CAA1D;;IAEA,IAAI7B,OAAJ,EAAa;MACX,IAAI8B,WAAJ;;MAEA,OAAO,CAACA,WAAW,GAAGvB,KAAK,CAACC,IAAN,CAAWR,OAAO,CAACS,gBAAR,CAAyBzB,iBAAzB,CAAX,CAAf,MAA4E,IAA5E,IAAoF8C,WAAW,KAAK,KAAK,CAAzG,GAA6G,KAAK,CAAlH,GAAsHA,WAAW,CAACpB,GAAZ,CAAgB,UAAUtG,IAAV,EAAgB;QAC3J,IAAI2H,cAAJ;;QAEA,OAAO,CAACA,cAAc,GAAG3H,IAAI,CAACwG,OAAvB,MAAoC,IAApC,IAA4CmB,cAAc,KAAK,KAAK,CAApE,GAAwE,KAAK,CAA7E,GAAiFA,cAAc,CAAC/E,GAAvG;MACD,CAJ4H,CAA7H;IAKD;;IAED,OAAO,IAAP;EACD,CAf+B,EAe7B,CAACgC,iBAAD,EAAoBG,MAApB,CAf6B,CAAhC;EAgBA,IAAI6C,kBAAkB,GAAGrJ,WAAW,CAAC,UAAU4D,KAAV,EAAiB;IACpD,IAAIsF,SAAS,GAAGnC,KAAK,GAAG,CAAxB;IACA,IAAIuC,QAAQ,GAAGL,cAAc,CAACC,SAAD,CAA7B;;IAEA,IAAII,QAAJ,EAAc;MACZpC,OAAO,CAACoC,QAAD,CAAP;MACAtC,QAAQ,CAACkC,SAAD,CAAR;MACArC,iBAAiB,CAACyC,QAAQ,CAAC,CAAD,CAAT,CAAjB;MACA5C,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC4C,QAAQ,CAAC,CAAD,CAAT,EAAc1F,KAAd,CAA5D;IACD;EACF,CAVmC,EAUjC,CAAC8C,QAAD,EAAWuC,cAAX,EAA2BlC,KAA3B,CAViC,CAApC;EAWA,IAAIwC,kBAAkB,GAAGvJ,WAAW,CAAC,UAAU4D,KAAV,EAAiB;IACpD,IAAIsF,SAAS,GAAGnC,KAAK,GAAG,CAAxB;IACA,IAAIuC,QAAQ,GAAGL,cAAc,CAACC,SAAD,CAA7B;;IAEA,IAAII,QAAJ,EAAc;MACZ,IAAIE,iBAAJ;;MAEAtC,OAAO,CAACoC,QAAD,CAAP;MACAtC,QAAQ,CAACkC,SAAD,CAAR;MACA,IAAIH,SAAS,GAAGxI,cAAc,CAACgB,IAAD,EAAO,UAAUE,IAAV,EAAgB;QACnD,OAAOA,IAAI,CAACT,QAAD,CAAJ,KAAmB4F,cAA1B;MACD,CAF6B,CAA9B;MAGA,IAAI6C,eAAe,GAAGV,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsD,CAACS,iBAAiB,GAAGT,SAAS,CAACW,MAA/B,MAA2C,IAA3C,IAAmDF,iBAAiB,KAAK,KAAK,CAA9E,GAAkF,KAAK,CAAvF,GAA2FA,iBAAiB,CAACxI,QAAD,CAAxL;;MAEA,IAAIyI,eAAJ,EAAqB;QACnB5C,iBAAiB,CAAC4C,eAAD,CAAjB;QACA/C,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC+C,eAAD,EAAkB7F,KAAlB,CAA5D;MACD;IACF;EACF,CAnBmC,EAmBjC,CAAC8C,QAAD,EAAWnF,IAAX,EAAiBqF,cAAjB,EAAiCqC,cAAjC,EAAiDlC,KAAjD,EAAwD/F,QAAxD,CAnBiC,CAApC;EAoBA,IAAI2I,aAAa,GAAG3J,WAAW,CAAC,UAAU4D,KAAV,EAAiB;IAC/C,IAAIgG,cAAJ;;IAEAjG,aAAa,CAACC,KAAD,GAASgG,cAAc,GAAG;MACrC9F,IAAI,EAAE8E,iBAD+B;MAErC7E,EAAE,EAAEiF;IAFiC,CAAjB,EAGnBY,cAAc,CAACnD,GAAG,GAAG,MAAH,GAAY,OAAhB,CAAd,GAAyC4C,kBAHtB,EAG0CO,cAAc,CAACnD,GAAG,GAAG,OAAH,GAAa,MAAjB,CAAd,GAAyC8C,kBAHnF,EAGuGK,cAHhH,EAAb;EAID,CAP8B,EAO5B,CAACP,kBAAD,EAAqBT,iBAArB,EAAwCW,kBAAxC,EAA4DP,iBAA5D,EAA+EvC,GAA/E,CAP4B,CAA/B;EAQA,OAAO;IACLG,cAAc,EAAEA,cADX;IAELC,iBAAiB,EAAEA,iBAFd;IAGLE,KAAK,EAAEA,KAHF;IAILC,QAAQ,EAAEA,QAJL;IAKLtD,IAAI,EAAEA,IALD;IAMLwD,OAAO,EAAEA,OANJ;IAOL2C,SAAS,EAAEF;EAPN,CAAP;AASD,CA5MM;AA8MP;AACA;AACA;AACA;;AACA,OAAO,IAAIG,qBAAqB,GAAG,SAASA,qBAAT,CAA+BzH,KAA/B,EAAsC;EACvE,IAAI0H,aAAa,GAAG1H,KAAK,CAAC2H,MAA1B;EAAA,IACIA,MAAM,GAAGD,aAAa,KAAK,KAAK,CAAvB,GAA2B,IAA3B,GAAkCA,aAD/C;EAAA,IAEIE,UAAU,GAAG5H,KAAK,CAAC4H,UAFvB;EAAA,IAGIC,SAAS,GAAG7H,KAAK,CAAC6H,SAHtB;EAAA,IAIIC,UAAU,GAAG9H,KAAK,CAAC8H,UAJvB;EAAA,IAKIC,cAAc,GAAG/H,KAAK,CAAC+H,cAL3B;EAAA,IAMIC,MAAM,GAAGhI,KAAK,CAACgI,MANnB;EAAA,IAOIC,MAAM,GAAGjI,KAAK,CAACiI,MAPnB;EAAA,IAQIC,MAAM,GAAGlI,KAAK,CAACkI,MARnB;EAAA,IASIC,OAAO,GAAGnI,KAAK,CAACmI,OATpB;EAAA,IAUIX,SAAS,GAAGxH,KAAK,CAACwH,SAVtB;EAAA,IAWIlG,aAAa,GAAGtB,KAAK,CAACsB,aAX1B;EAAA,IAYI8G,gBAAgB,GAAGpI,KAAK,CAACoI,gBAZ7B;EAAA,IAaIC,oBAAoB,GAAGrI,KAAK,CAACqI,oBAbjC;EAcA,IAAIC,WAAW,GAAG3K,WAAW,CAAC,YAAY;IACxC,IAAI4K,mBAAJ,EAAyBC,qBAAzB;;IAEA,CAACD,mBAAmB,GAAGX,UAAU,CAACa,OAAlC,MAA+C,IAA/C,IAAuDF,mBAAmB,KAAK,KAAK,CAApF,GAAwF,KAAK,CAA7F,GAAiG,CAACC,qBAAqB,GAAGD,mBAAmB,CAACG,KAA7C,MAAwD,IAAxD,IAAgEF,qBAAqB,KAAK,KAAK,CAA/F,GAAmG,KAAK,CAAxG,GAA4GA,qBAAqB,CAACG,IAAtB,CAA2BJ,mBAA3B,CAA7M;IACAJ,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,EAAzD;EACD,CAL4B,EAK1B,CAACA,OAAD,EAAUP,UAAV,CAL0B,CAA7B;EAMA,IAAIgB,UAAU,GAAGjL,WAAW,CAAC,YAAY;IACvC,IAAIkL,oBAAJ,EAA0BC,qBAA1B;;IAEA,CAACD,oBAAoB,GAAGjB,UAAU,CAACa,OAAnC,MAAgD,IAAhD,IAAwDI,oBAAoB,KAAK,KAAK,CAAtF,GAA0F,KAAK,CAA/F,GAAmG,CAACC,qBAAqB,GAAGD,oBAAoB,CAACE,IAA9C,MAAwD,IAAxD,IAAgED,qBAAqB,KAAK,KAAK,CAA/F,GAAmG,KAAK,CAAxG,GAA4GA,qBAAqB,CAACH,IAAtB,CAA2BE,oBAA3B,CAA/M;IACAX,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,EAAtD;EACD,CAL2B,EAKzB,CAACA,MAAD,EAASN,UAAT,CALyB,CAA5B;EAMA,IAAIoB,oBAAoB,GAAGrL,WAAW,CAAC,YAAY;IACjD,IAAIqK,MAAJ,EAAY;MACVM,WAAW;MACX;IACD;;IAEDM,UAAU;EACX,CAPqC,EAOnC,CAACZ,MAAD,EAASY,UAAT,EAAqBN,WAArB,CAPmC,CAAtC;EAQA,IAAIW,QAAQ,GAAGtL,WAAW,CAAC,UAAU4D,KAAV,EAAiB;IAC1C,IAAIA,KAAK,CAAC4C,MAAN,MAAkB0D,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAACY,OAAlF,CAAJ,EAAgG;MAC9F;MACA,IAAId,MAAM,IAAIpG,KAAK,CAACS,GAAN,KAAc5D,UAAU,CAACgE,KAAvC,EAA8C;QAC5C4G,oBAAoB;MACrB,CAJ6F,CAI5F;;;MAGF,IAAIzH,KAAK,CAACS,GAAN,KAAc5D,UAAU,CAACiE,SAA7B,EAAwC;QACtC4F,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAAC1G,KAAD,CAAtD;MACD;IACF;;IAED,IAAIuG,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,IAAgDA,UAAU,CAACW,OAA/D,EAAwE;MACtE;MACAnH,aAAa,KAAK,IAAlB,IAA0BA,aAAa,KAAK,KAAK,CAAjD,GAAqD,KAAK,CAA1D,GAA8DA,aAAa,CAACC,KAAD,CAA3E;;MAEA,IAAIA,KAAK,CAACS,GAAN,KAAc5D,UAAU,CAACgE,KAA7B,EAAoC;QAClCgG,gBAAgB,KAAK,IAArB,IAA6BA,gBAAgB,KAAK,KAAK,CAAvD,GAA2D,KAAK,CAAhE,GAAoEA,gBAAgB,CAAC7G,KAAD,CAApF;MACD;MACD;AACN;AACA;AACA;;;MAGM,IAAIA,KAAK,CAACS,GAAN,KAAc5D,UAAU,CAACiE,SAAzB,IAAsCd,KAAK,CAAC4C,MAAN,MAAkB4D,cAAc,KAAK,IAAnB,IAA2BA,cAAc,KAAK,KAAK,CAAnD,GAAuD,KAAK,CAA5D,GAAgEA,cAAc,CAACU,OAAjG,CAA1C,EAAqJ;QACnJJ,oBAAoB,KAAK,IAAzB,IAAiCA,oBAAoB,KAAK,KAAK,CAA/D,GAAmE,KAAK,CAAxE,GAA4EA,oBAAoB,CAAC9G,KAAD,CAAhG;MACD,CAfqE,CAepE;;;MAGF,IAAIA,KAAK,CAACS,GAAN,CAAUkE,MAAV,KAAqB,CAArB,IAA0B,KAAKgD,IAAL,CAAU3H,KAAK,CAACS,GAAhB,CAA9B,EAAoD;QAClD,IAAImH,aAAJ,CADkD,CAGlD;QACA;;;QACA,IAAI,CAAC,CAACA,aAAa,GAAG5H,KAAK,CAAC4C,MAAvB,MAAmC,IAAnC,IAA2CgF,aAAa,KAAK,KAAK,CAAlE,GAAsE,KAAK,CAA3E,GAA+EA,aAAa,CAACC,OAA9F,MAA2G,OAA/G,EAAwH;UACtH,IAAIC,qBAAJ;;UAEAtB,cAAc,KAAK,IAAnB,IAA2BA,cAAc,KAAK,KAAK,CAAnD,GAAuD,KAAK,CAA5D,GAAgE,CAACsB,qBAAqB,GAAGtB,cAAc,CAACU,OAAxC,MAAqD,IAArD,IAA6DY,qBAAqB,KAAK,KAAK,CAA5F,GAAgG,KAAK,CAArG,GAAyGA,qBAAqB,CAACC,KAAtB,EAAzK;QACD;MACF;IACF;;IAED,IAAI/H,KAAK,CAACS,GAAN,KAAc5D,UAAU,CAACkE,GAAzB,IAAgCf,KAAK,CAACS,GAAN,KAAc5D,UAAU,CAACmE,GAA7D,EAAkE;MAChE+F,WAAW;IACZ,CA9CyC,CA8CxC;;;IAGFd,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAACjG,KAAD,CAA/D;EACD,CAlDyB,EAkDvB,CAAC+G,WAAD,EAAcU,oBAAd,EAAoClB,UAApC,EAAgDG,MAAhD,EAAwDT,SAAxD,EAAmElG,aAAnE,EAAkF+G,oBAAlF,EAAwGD,gBAAxG,EAA0HT,MAA1H,EAAkIE,SAAlI,EAA6IE,cAA7I,CAlDuB,CAA1B;EAmDA,OAAOkB,QAAP;AACD,CAvFM;AAyFP;AACA;AACA;AACA;;AACA,OAAO,SAASM,SAAT,CAAmBvJ,KAAnB,EAA0B;EAC/B,IAAIwJ,QAAQ,GAAGxJ,KAAK,CAACwJ,QAArB;EAAA,IACItK,IAAI,GAAGc,KAAK,CAACd,IADjB;EAAA,IAEIuK,QAAQ,GAAGzJ,KAAK,CAACyJ,QAFrB;EAAA,IAGIpF,QAAQ,GAAGrE,KAAK,CAACqE,QAHrB,CAD+B,CAIA;;EAE/B,IAAIqF,UAAU,GAAGjM,QAAQ,CAAC,EAAD,CAAzB;EAAA,IACI+B,aAAa,GAAGkK,UAAU,CAAC,CAAD,CAD9B;EAAA,IAEIC,gBAAgB,GAAGD,UAAU,CAAC,CAAD,CAFjC;EAGA;AACF;AACA;AACA;;;EAGE,IAAIE,kBAAkB,GAAGjM,WAAW,CAAC,UAAUyB,IAAV,EAAgBK,OAAhB,EAAyB;IAC5D,IAAIF,KAAK,GAAGH,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACoK,QAAD,CAA5D;;IAEA,IAAIK,QAAQ,GAAG9L,WAAW,CAAC0B,OAAD,CAAX,GAAuBD,aAAvB,GAAuCC,OAAtD;;IAEA,IAAI,OAAOgK,QAAP,KAAoB,UAAxB,EAAoC;MAClC,OAAOA,QAAQ,CAACI,QAAD,EAAWtK,KAAX,EAAkBH,IAAlB,CAAf;IACD;;IAED,OAAOE,aAAa,CAACC,KAAD,EAAQsK,QAAR,CAApB;EACD,CAVmC,EAUjC,CAACL,QAAD,EAAWC,QAAX,EAAqBjK,aAArB,CAViC,CAApC;EAWA,IAAIsK,kBAAkB,GAAGnM,WAAW,CAAC,UAAUoM,QAAV,EAAoB;IACvDC,eAAe,CAAC7L,iBAAiB,CAAC4L,QAAD,EAAW,UAAU3K,IAAV,EAAgB;MAC1D,OAAOwK,kBAAkB,CAACxK,IAAD,CAAzB;IACD,CAFgC,CAAlB,CAAf;EAGD,CAJmC,EAIjC,CAACwK,kBAAD,CAJiC,CAApC;;EAMA,IAAIK,UAAU,GAAGxM,QAAQ,CAACU,iBAAiB,CAACe,IAAD,EAAO,UAAUE,IAAV,EAAgB;IAChE,OAAOwK,kBAAkB,CAACxK,IAAD,CAAzB;EACD,CAF0C,CAAlB,CAAzB;EAAA,IAGI8K,YAAY,GAAGD,UAAU,CAAC,CAAD,CAH7B;EAAA,IAIID,eAAe,GAAGC,UAAU,CAAC,CAAD,CAJhC;;EAMA,IAAIE,YAAY,GAAG,SAASA,YAAT,CAAsB3K,aAAtB,EAAqC+B,KAArC,EAA4C;IAC7D,IAAI2I,YAAY,GAAG/L,iBAAiB,CAACe,IAAD,EAAO,UAAUE,IAAV,EAAgB;MACzD,OAAOwK,kBAAkB,CAACxK,IAAD,EAAOI,aAAP,CAAzB;IACD,CAFmC,CAApC;IAGAwK,eAAe,CAACE,YAAD,CAAf;IACAP,gBAAgB,CAACnK,aAAD,CAAhB;IACA6E,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC7E,aAAD,EAAgB0K,YAAhB,EAA8B3I,KAA9B,CAA5D;EACD,CAPD;;EASA,OAAO;IACL/B,aAAa,EAAEA,aADV;IAEL0K,YAAY,EAAEA,YAFT;IAGLJ,kBAAkB,EAAEA,kBAHf;IAILH,gBAAgB,EAAEA,gBAJb;IAKLC,kBAAkB,EAAEA,kBALf;IAMLO,YAAY,EAAEA;EANT,CAAP;AAQD;AAED;AACA;AACA;;AACA,OAAO,SAASC,gBAAT,CAA0BC,GAA1B,EAA+BC,MAA/B,EAAuC;EAC5C,IAAI1C,UAAU,GAAG0C,MAAM,CAAC1C,UAAxB;EAAA,IACIE,UAAU,GAAGwC,MAAM,CAACxC,UADxB;EAAA,IAEID,SAAS,GAAGyC,MAAM,CAACzC,SAFvB;EAAA,IAGI0C,OAAO,GAAGD,MAAM,CAACC,OAHrB;EAAA,IAIIC,OAAO,GAAGF,MAAM,CAACE,OAJrB;EAAA,IAKIC,MAAM,GAAGH,MAAM,CAACG,MALpB;EAMA,IAAI7B,UAAU,GAAGjL,WAAW,CAAC,YAAY;IACvC,IAAI+M,oBAAJ;;IAEA9C,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwD,CAAC8C,oBAAoB,GAAG9C,UAAU,CAACa,OAAnC,MAAgD,IAAhD,IAAwDiC,oBAAoB,KAAK,KAAK,CAAtF,GAA0F,KAAK,CAA/F,GAAmGA,oBAAoB,CAAC3B,IAArB,EAA3J;EACD,CAJ2B,EAIzB,CAACnB,UAAD,CAJyB,CAA5B;EAKA,IAAIU,WAAW,GAAG3K,WAAW,CAAC,YAAY;IACxC,IAAIgN,oBAAJ;;IAEA/C,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwD,CAAC+C,oBAAoB,GAAG/C,UAAU,CAACa,OAAnC,MAAgD,IAAhD,IAAwDkC,oBAAoB,KAAK,KAAK,CAAtF,GAA0F,KAAK,CAA/F,GAAmGA,oBAAoB,CAACjC,KAArB,EAA3J;EACD,CAJ4B,EAI1B,CAACd,UAAD,CAJ0B,CAA7B;EAKA,IAAIgD,oBAAoB,GAAGjN,WAAW,CAAC,YAAY;IACjD,IAAIkN,oBAAJ;;IAEAjD,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwD,CAACiD,oBAAoB,GAAGjD,UAAU,CAACa,OAAnC,MAAgD,IAAhD,IAAwDoC,oBAAoB,KAAK,KAAK,CAAtF,GAA0F,KAAK,CAA/F,GAAmGA,oBAAoB,CAACC,cAArB,EAA3J;EACD,CAJqC,EAInC,CAAClD,UAAD,CAJmC,CAAtC;EAKAlK,mBAAmB,CAAC2M,GAAD,EAAM,YAAY;IACnC;IACA,IAAII,MAAJ,EAAY;MACV,OAAO;QACL,IAAIM,IAAJ,GAAW;UACT,IAAIC,qBAAJ,EAA2BC,oBAA3B;;UAEA,OAAOV,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,IAA0CA,OAAO,CAAC9B,OAAlD,GAA4D8B,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAAC9B,OAAtH,GAAgI,CAACuC,qBAAqB,GAAGpD,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwD,CAACqD,oBAAoB,GAAGrD,UAAU,CAACa,OAAnC,MAAgD,IAAhD,IAAwDwC,oBAAoB,KAAK,KAAK,CAAtF,GAA0F,KAAK,CAA/F,GAAmGA,oBAAoB,CAACF,IAAzM,MAAmN,IAAnN,IAA2NC,qBAAqB,KAAK,KAAK,CAA1P,GAA8PA,qBAA9P,GAAsR,IAA7Z;QACD,CALI;;QAOL,IAAIE,IAAJ,GAAW;UACT,IAAI,EAAEV,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,IAA0CA,OAAO,CAAC/B,OAApD,CAAJ,EAAkE;YAChE,MAAM,IAAI0C,KAAJ,CAAU,oEAAV,CAAN;UACD;;UAED,OAAOX,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAAC/B,OAAjE;QACD;;MAbI,CAAP;IAgBD;;IAED,OAAO;MACL,IAAIsC,IAAJ,GAAW;QACT,IAAIK,IAAJ,EAAUC,oBAAV;;QAEA,OAAO,CAACD,IAAI,GAAG,CAACb,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAAC9B,OAA3D,MAAwEb,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwD,CAACyD,oBAAoB,GAAGzD,UAAU,CAACa,OAAnC,MAAgD,IAAhD,IAAwD4C,oBAAoB,KAAK,KAAK,CAAtF,GAA0F,KAAK,CAA/F,GAAmGA,oBAAoB,CAACN,IAAxP,CAAR,MAA2Q,IAA3Q,IAAmRK,IAAI,KAAK,KAAK,CAAjS,GAAqSA,IAArS,GAA4S,IAAnT;MACD,CALI;;MAOL,IAAIE,OAAJ,GAAc;QACZ,IAAIC,mBAAJ;;QAEA,IAAI,EAAEzD,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,IAAgDA,UAAU,CAACW,OAA7D,CAAJ,EAA2E;UACzE,MAAM,IAAI0C,KAAJ,CAAU,sEAAV,CAAN;QACD;;QAED,OAAO,CAACI,mBAAmB,GAAGzD,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwDA,UAAU,CAACW,OAA1F,MAAuG,IAAvG,IAA+G8C,mBAAmB,KAAK,KAAK,CAA5I,GAAgJA,mBAAhJ,GAAsK,IAA7K;MACD,CAfI;;MAiBL,IAAIpH,MAAJ,GAAa;QACX,IAAIqH,kBAAJ;;QAEA,OAAO,CAACA,kBAAkB,GAAG3D,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAACY,OAAtF,MAAmG,IAAnG,IAA2G+C,kBAAkB,KAAK,KAAK,CAAvI,GAA2IA,kBAA3I,GAAgK,IAAvK;MACD,CArBI;;MAuBL,IAAIN,IAAJ,GAAW;QACT,IAAI,EAAEV,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,IAA0CA,OAAO,CAAC/B,OAApD,CAAJ,EAAkE;UAChE,MAAM,IAAI0C,KAAJ,CAAU,qKAAV,CAAN;QACD;;QAED,OAAOX,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAAC/B,OAAjE;MACD,CA7BI;;MA+BLqC,cAAc,EAAEF,oBA/BX;MAgCL7B,IAAI,EAAEH,UAhCD;MAiCLF,KAAK,EAAEJ;IAjCF,CAAP;EAmCD,CAxDkB,CAAnB;AAyDD"},"metadata":{},"sourceType":"module"}