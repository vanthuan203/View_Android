{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/KT2/Desktop/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/KT2/Desktop/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/KT2/Desktop/ssc.fe.cheatview-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as React from'react';import{Button,Tooltip}from'antd';import{Spinner}from'reactstrap';import{postWithoutTokenFunciton}from'utils/ApiHelper';import{useEffect}from'react';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ChannelItem=function ChannelItem(props){var index=props.index,channel=props.channel,home_rate=props.home_rate,note=props.note,direct_rate=props.direct_rate,view_need=props.view_need,comment_rate=props.comment_rate,mobile_rate=props.mobile_rate,search_rate=props.search_rate,enabled=props.enabled,max_thread=props.max_thread,group_id=props.group_id,like_rate=props.like_rate,comment_list=props.comment_list,suggest_rate=props.suggest_rate,premium_rate=props.premium_rate,keyword=props.keyword,view_percent=props.view_percent,onStatusChange=props.onStatusChange;var STATUS_PROCESSING=1;var STATUS_ERROR=2;var STATUS_SUCCESSFUL=3;var _React$useState=React.useState(STATUS_PROCESSING),_React$useState2=_slicedToArray(_React$useState,2),status=_React$useState2[0],setStatus=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),errorMsg=_React$useState4[0],setErrorMsg=_React$useState4[1];useEffect(function(){processChannel();},[]);useEffect(function(){if(status===STATUS_PROCESSING){processChannel();}},[status]);var validateChannel=function validateChannel(_channel){return true;};var processChannel=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var resp,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(validateChannel(channel)){_context.next=3;break;}throw Error('Invalid channel');case 3:onStatusChange&&onStatusChange(STATUS_PROCESSING);_context.next=6;return postWithoutTokenFunciton('channel/insert',{channel_id:channel,home_rate:home_rate,note:note,direct_rate:direct_rate,view_need:view_need,comment_rate:comment_rate,mobile_rate:mobile_rate,search_rate:search_rate,enabled:enabled,max_thread:max_thread,group_id:group_id,like_rate:like_rate,comment_list:comment_list,suggest_rate:suggest_rate,premium_rate:premium_rate,keyword:keyword,view_percent:view_percent});case 6:resp=_context.sent;if(resp&&resp.data){data=resp.data;if(data.status==='fail'){setStatus(STATUS_ERROR);setErrorMsg(data.message);onStatusChange&&onStatusChange(STATUS_ERROR);}else if(data.status==='success'){setStatus(STATUS_SUCCESSFUL);onStatusChange&&onStatusChange(STATUS_SUCCESSFUL);}}console.log('processChannel',resp);_context.next=17;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log('processChannel',_context.t0);setStatus(STATUS_ERROR);setErrorMsg(_context.t0.message);onStatusChange&&onStatusChange(STATUS_ERROR);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function processChannel(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-1 d-flex align-items-center\",children:[index+1,\".\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-7 d-flex  align-items-center\",children:/*#__PURE__*/_jsx(\"span\",{children:channel})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 d-flex justify-content-end align-items-center\",children:status===STATUS_ERROR?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row align-items-center\",children:[/*#__PURE__*/_jsx(Tooltip,{title:errorMsg,children:/*#__PURE__*/_jsx(\"span\",{id:\"error_\".concat(index),children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-info-circle-fill text-danger\"})})}),/*#__PURE__*/_jsx(Button,{type:\"link\",onClick:function onClick(){setStatus(STATUS_PROCESSING);setErrorMsg('');},children:\"Th\\u1EED l\\u1EA1i\"})]})}):status===STATUS_SUCCESSFUL?/*#__PURE__*/_jsx(\"span\",{id:\"error_\".concat(index),children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-circle-fill text-success\"})}):/*#__PURE__*/_jsx(Spinner,{size:\"sm\"})})]})});};export default ChannelItem;","map":{"version":3,"names":["React","Button","Tooltip","Spinner","postWithoutTokenFunciton","useEffect","ChannelItem","props","index","channel","home_rate","note","direct_rate","view_need","comment_rate","mobile_rate","search_rate","enabled","max_thread","group_id","like_rate","comment_list","suggest_rate","premium_rate","keyword","view_percent","onStatusChange","STATUS_PROCESSING","STATUS_ERROR","STATUS_SUCCESSFUL","useState","status","setStatus","errorMsg","setErrorMsg","processChannel","validateChannel","_channel","Error","channel_id","resp","data","message","console","log"],"sources":["C:/Users/KT2/Desktop/ssc.fe.cheatview-main/src/app/modules/orders/modals/AddModal/ChannelItem.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport {Button, Tooltip} from 'antd'\n\nimport {Spinner} from 'reactstrap'\nimport {postWithoutTokenFunciton} from 'utils/ApiHelper'\nimport {useEffect} from 'react'\n\ninterface IChannelItemProps {\n  index: number\n}\n\nconst ChannelItem: React.FunctionComponent<IChannelItemProps> = (\n  props: any | IChannelItemProps\n) => {\n  const {\n    index,\n    channel,\n    home_rate,\n    note,\n    direct_rate,\n    view_need,\n    comment_rate,\n    mobile_rate,\n    search_rate,\n    enabled,\n    max_thread,\n    group_id,\n    like_rate,\n    comment_list,\n    suggest_rate,\n    premium_rate,\n    keyword,\n    view_percent,\n    onStatusChange,\n  } = props\n\n  const STATUS_PROCESSING = 1\n  const STATUS_ERROR = 2\n  const STATUS_SUCCESSFUL = 3\n\n  const [status, setStatus] = React.useState(STATUS_PROCESSING)\n  const [errorMsg, setErrorMsg] = React.useState('')\n\n  useEffect(() => {\n    processChannel()\n  }, [])\n\n  useEffect(() => {\n    if (status === STATUS_PROCESSING) {\n      processChannel()\n    }\n  }, [status])\n\n  const validateChannel = (_channel: string): boolean => {\n    return true\n  }\n\n  const processChannel = async () => {\n    try {\n      if (!validateChannel(channel)) {\n        throw Error('Invalid channel')\n      }\n      onStatusChange && onStatusChange(STATUS_PROCESSING)\n      const resp: any = await postWithoutTokenFunciton('channel/insert', {\n        channel_id: channel,\n        home_rate,\n        note,\n        direct_rate,\n        view_need,\n        comment_rate,\n        mobile_rate,\n        search_rate,\n        enabled,\n        max_thread,\n        group_id,\n        like_rate,\n        comment_list,\n        suggest_rate,\n        premium_rate,\n        keyword,\n        view_percent,\n      })\n      if (resp && resp.data) {\n        const data = resp.data\n        if (data.status === 'fail') {\n          setStatus(STATUS_ERROR)\n          setErrorMsg(data.message)\n          onStatusChange && onStatusChange(STATUS_ERROR)\n        } else if (data.status === 'success') {\n          setStatus(STATUS_SUCCESSFUL)\n          onStatusChange && onStatusChange(STATUS_SUCCESSFUL)\n        }\n      }\n\n      console.log('processChannel', resp)\n    } catch (e: any) {\n      console.log('processChannel', e)\n      setStatus(STATUS_ERROR)\n      setErrorMsg(e.message)\n      onStatusChange && onStatusChange(STATUS_ERROR)\n    }\n  }\n\n  return (\n    <>\n      <div className='row'>\n        <div className='col-1 d-flex align-items-center'>{index + 1}.</div>\n        <div className='col-7 d-flex  align-items-center'>\n          <span>{channel}</span>\n        </div>\n        <div className='col-4 d-flex justify-content-end align-items-center'>\n          {status === STATUS_ERROR ? (\n            <>\n              <div className='d-flex flex-row align-items-center'>\n                <Tooltip title={errorMsg}>\n                  <span id={`error_${index}`}>\n                    <i className='bi bi-info-circle-fill text-danger'></i>\n                  </span>\n                </Tooltip>\n                <Button\n                  type='link'\n                  onClick={() => {\n                    setStatus(STATUS_PROCESSING)\n                    setErrorMsg('')\n                  }}\n                >\n                  Thử lại\n                </Button>\n              </div>\n            </>\n          ) : status === STATUS_SUCCESSFUL ? (\n            <span id={`error_${index}`}>\n              <i className='bi bi-check-circle-fill text-success'></i>\n            </span>\n          ) : (\n            <Spinner size='sm' />\n          )}\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default ChannelItem\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}