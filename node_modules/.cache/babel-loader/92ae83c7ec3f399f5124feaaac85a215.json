{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport isFunction from 'lodash/isFunction';\nimport isNil from 'lodash/isNil';\nimport DropdownMenu from './DropdownMenu';\nimport Checkbox from '../Checkbox';\nimport { useCascadeValue, useColumnData, useFlattenData, isSomeChildChecked } from './utils';\nimport { getNodeParents, findNodeOfTree } from '../utils/treeUtils';\nimport { getColumnsAndPaths } from '../Cascader/utils';\nimport { createChainedFunction, mergeRefs, getSafeRegExpString, useClassNames, useCustom, useUpdateEffect } from '../utils';\nimport { PickerToggle, PickerOverlay, SearchBar, SelectedElement, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar emptyArray = [];\nvar MultiCascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _selectedPaths;\n\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'div' : _props$as,\n      _props$data = props.data,\n      data = _props$data === void 0 ? emptyArray : _props$data,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n      defaultValue = props.defaultValue,\n      valueProp = props.value,\n      _props$valueKey = props.valueKey,\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n      _props$labelKey = props.labelKey,\n      labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n      _props$childrenKey = props.childrenKey,\n      childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n      disabled = props.disabled,\n      _props$disabledItemVa = props.disabledItemValues,\n      disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n      _props$cleanable = props.cleanable,\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n      overrideLocale = props.locale,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      _props$countable = props.countable,\n      countable = _props$countable === void 0 ? true : _props$countable,\n      _props$cascade = props.cascade,\n      cascade = _props$cascade === void 0 ? true : _props$cascade,\n      inline = props.inline,\n      placeholder = props.placeholder,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n      _props$appearance = props.appearance,\n      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n      menuWidth = props.menuWidth,\n      menuHeight = props.menuHeight,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      _props$searchable = props.searchable,\n      searchable = _props$searchable === void 0 ? true : _props$searchable,\n      _props$uncheckableIte = props.uncheckableItemValues,\n      uncheckableItemValues = _props$uncheckableIte === void 0 ? emptyArray : _props$uncheckableIte,\n      id = props.id,\n      getChildren = props.getChildren,\n      renderValue = props.renderValue,\n      renderMenu = props.renderMenu,\n      renderMenuItem = props.renderMenuItem,\n      renderExtraFooter = props.renderExtraFooter,\n      onEnter = props.onEnter,\n      onExit = props.onExit,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onChange = props.onChange,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      onCheck = props.onCheck,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"defaultValue\", \"value\", \"valueKey\", \"labelKey\", \"childrenKey\", \"disabled\", \"disabledItemValues\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"countable\", \"cascade\", \"inline\", \"placeholder\", \"placement\", \"appearance\", \"menuWidth\", \"menuHeight\", \"menuClassName\", \"menuStyle\", \"searchable\", \"uncheckableItemValues\", \"id\", \"getChildren\", \"renderValue\", \"renderMenu\", \"renderMenuItem\", \"renderExtraFooter\", \"onEnter\", \"onExit\", \"onExited\", \"onClean\", \"onSearch\", \"onSelect\", \"onChange\", \"onOpen\", \"onClose\", \"onCheck\"]);\n\n  var itemKeys = {\n    childrenKey: childrenKey,\n    labelKey: labelKey,\n    valueKey: valueKey\n  };\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useFlattenData = useFlattenData(data, itemKeys),\n      flattenData = _useFlattenData.flattenData,\n      addFlattenData = _useFlattenData.addFlattenData;\n\n  var _useCascadeValue = useCascadeValue(_extends({}, itemKeys, {\n    uncheckableItemValues: uncheckableItemValues,\n    cascade: cascade,\n    value: valueProp || defaultValue\n  }), flattenData),\n      value = _useCascadeValue.value,\n      setValue = _useCascadeValue.setValue,\n      splitValue = _useCascadeValue.splitValue; // The columns displayed in the cascading panel.\n\n\n  var _useColumnData = useColumnData(flattenData),\n      columnData = _useColumnData.columnData,\n      setColumnData = _useColumnData.setColumnData,\n      addColumn = _useColumnData.addColumn,\n      romoveColumnByIndex = _useColumnData.romoveColumnByIndex,\n      enforceUpdateColumnData = _useColumnData.enforceUpdateColumnData;\n\n  useUpdateEffect(function () {\n    enforceUpdateColumnData(data);\n  }, [data]); // The path after cascading data selection.\n\n  var _useState2 = useState(),\n      selectedPaths = _useState2[0],\n      setSelectedPaths = _useState2[1];\n\n  var triggerRef = useRef(null);\n  var overlayRef = useRef(null);\n  var targetRef = useRef(null);\n  var searchInputRef = useRef(null);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      locale = _useCustom.locale,\n      rtl = _useCustom.rtl;\n\n  var selectedItems = flattenData.filter(function (item) {\n    return value.some(function (v) {\n      return v === item[valueKey];\n    });\n  }) || []; // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(selectedPaths === null || selectedPaths === void 0 ? void 0 : (_selectedPaths = selectedPaths[selectedPaths.length - 1]) === null || _selectedPaths === void 0 ? void 0 : _selectedPaths[valueKey], {\n    rtl: rtl,\n    data: flattenData,\n    valueKey: valueKey,\n    defaultLayer: selectedPaths !== null && selectedPaths !== void 0 && selectedPaths.length ? selectedPaths.length - 1 : 0,\n    target: function target() {\n      return overlayRef.current;\n    },\n    callback: useCallback(function (value) {\n      var _getColumnsAndPaths = getColumnsAndPaths(data, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey,\n        isAttachChildren: true\n      }),\n          columns = _getColumnsAndPaths.columns,\n          paths = _getColumnsAndPaths.paths;\n\n      setColumnData(columns);\n      setSelectedPaths(paths);\n    }, [childrenKey, data, setColumnData, valueKey])\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setLayer = _useFocusItemValue.setLayer,\n      setKeys = _useFocusItemValue.setKeys,\n      onFocusItem = _useFocusItemValue.onKeyDown;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n\n  var hasValue = selectedItems.length > 0 || Number(valueProp === null || valueProp === void 0 ? void 0 : valueProp.length) > 0 && isFunction(renderValue);\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useState3 = useState(''),\n      searchKeyword = _useState3[0],\n      setSearchKeyword = _useState3[1];\n\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    setActive(false);\n    setSearchKeyword('');\n  }, []);\n  var handleSelect = useCallback(function (node, cascadePaths, event) {\n    var _node$childrenKey, _node$childrenKey2, _triggerRef$current, _triggerRef$current$u;\n\n    setSelectedPaths(cascadePaths);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\n    var columnIndex = cascadePaths.length; // Lazy load node's children\n\n    if (typeof getChildren === 'function' && ((_node$childrenKey = node[childrenKey]) === null || _node$childrenKey === void 0 ? void 0 : _node$childrenKey.length) === 0) {\n      node.loading = true;\n      var children = getChildren(node);\n\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          node.loading = false;\n          node[childrenKey] = data;\n\n          if (targetRef.current) {\n            addFlattenData(data, node);\n            addColumn(data, columnIndex);\n          }\n        });\n      } else {\n        node.loading = false;\n        node[childrenKey] = children;\n        addFlattenData(children, node);\n        addColumn(children, columnIndex);\n      }\n    } else if ((_node$childrenKey2 = node[childrenKey]) !== null && _node$childrenKey2 !== void 0 && _node$childrenKey2.length) {\n      addColumn(node[childrenKey], columnIndex);\n    } else {\n      // Removes subsequent columns of the current column when the clicked node is a leaf node.\n      romoveColumnByIndex(columnIndex);\n    }\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$u = _triggerRef$current.updatePosition) === null || _triggerRef$current$u === void 0 ? void 0 : _triggerRef$current$u.call(_triggerRef$current);\n  }, [onSelect, getChildren, childrenKey, addFlattenData, addColumn, romoveColumnByIndex]);\n  var handleCheck = useCallback(function (node, event, checked) {\n    var nodeValue = node[valueKey];\n    var nextValue = [];\n\n    if (cascade) {\n      nextValue = splitValue(node, checked, value).value;\n    } else {\n      nextValue = [].concat(value);\n\n      if (checked) {\n        nextValue.push(nodeValue);\n      } else {\n        nextValue = nextValue.filter(function (n) {\n          return n !== nodeValue;\n        });\n      }\n    }\n\n    setValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    onCheck === null || onCheck === void 0 ? void 0 : onCheck(nextValue, node, checked, event);\n  }, [cascade, onChange, onCheck, setValue, splitValue, value, valueKey]);\n  var handleClean = useCallback(function (event) {\n    if (disabled || !targetRef.current) {\n      return;\n    }\n\n    setSelectedPaths([]);\n    setValue([]);\n    setColumnData([data]);\n    onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n  }, [data, disabled, onChange, setColumnData, setValue]);\n  var handleMenuPressEnter = useCallback(function (event) {\n    var _overlayRef$current;\n\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var checkbox = (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.querySelector(\"[data-key=\\\"\" + focusItemValue + \"\\\"] [type=\\\"checkbox\\\"]\");\n\n    if (checkbox) {\n      handleCheck(focusItem, event, (checkbox === null || checkbox === void 0 ? void 0 : checkbox.getAttribute('aria-checked')) !== 'true');\n    }\n  }, [data, focusItemValue, handleCheck, valueKey]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    searchInputRef: searchInputRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n  var handleSearch = useCallback(function (value, event) {\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n\n    if (value) {\n      setLayer(0);\n    } else if (selectedPaths !== null && selectedPaths !== void 0 && selectedPaths.length) {\n      setLayer(selectedPaths.length - 1);\n    }\n\n    setKeys([]);\n  }, [onSearch, selectedPaths, setKeys, setLayer]);\n  var getSearchResult = useCallback(function () {\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (uncheckableItemValues.some(function (value) {\n        return item[valueKey] === value;\n      })) {\n        return false;\n      }\n\n      if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n        return true;\n      }\n\n      return false;\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]); // A maximum of 100 search results are returned.\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  }, [flattenData, labelKey, searchKeyword, uncheckableItemValues, valueKey]);\n\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var _extends2;\n\n    var nodes = getNodeParents(item);\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var labelElements = [];\n    var a = item[labelKey].split(regx);\n    var b = item[labelKey].match(regx);\n\n    for (var i = 0; i < a.length; i++) {\n      labelElements.push(a[i]);\n\n      if (b[i]) {\n        labelElements.push( /*#__PURE__*/React.createElement(\"span\", {\n          key: i,\n          className: prefix('cascader-search-match')\n        }, b[i]));\n      }\n    }\n\n    nodes.push(_extends({}, item, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2)));\n    var active = value.some(function (value) {\n      if (cascade) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      }\n\n      return item[valueKey] === value;\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return nodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      className: itemClasses,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey]\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      disabled: disabled,\n      checked: active,\n      value: item[valueKey],\n      indeterminate: cascade && !active && isSomeChildChecked(item, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }),\n      onChange: function onChange(_value, checked, event) {\n        handleCheck(item, event, checked);\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: prefix('cascader-cols')\n    }, nodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    }))));\n  };\n\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var _ref = positionProps || {},\n        left = _ref.left,\n        top = _ref.top,\n        className = _ref.className;\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var classes = merge(className, menuClassName, prefix('cascader-menu', 'multi-cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword,\n      inputRef: searchInputRef\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      cascade: cascade,\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      uncheckableItemValues: uncheckableItemValues,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnData,\n      cascadePaths: selectedPaths,\n      value: value,\n      onSelect: handleSelect,\n      onCheck: handleCheck,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var selectedElement = placeholder;\n\n  if (selectedItems.length > 0) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      prefix: prefix,\n      cascade: cascade,\n      locale: locale\n    });\n  }\n\n  if (hasValue && isFunction(renderValue)) {\n    selectedElement = renderValue(value.length ? value : valueProp !== null && valueProp !== void 0 ? valueProp : [], selectedItems, selectedElement); // If renderValue returns null or undefined, hasValue is false.\n\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    classPrefix: classPrefix,\n    hasValue: hasValue,\n    countable: countable,\n    name: 'cascader',\n    appearance: appearance,\n    cleanable: cleanable\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  if (inline) {\n    return renderDropdownMenu();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    onExit: createChainedFunction(onClose, onExit),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    as: toggleAs,\n    appearance: appearance,\n    disabled: disabled,\n    ref: targetRef,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || locale.placeholder)));\n});\nMultiCascader.displayName = 'MultiCascader';\nMultiCascader.propTypes = _extends({}, listPickerPropTypes, {\n  value: PropTypes.array,\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  cascade: PropTypes.bool,\n  inline: PropTypes.bool,\n  countable: PropTypes.bool,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  uncheckableItemValues: PropTypes.array,\n  searchable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func,\n  onCheck: PropTypes.func\n});\nexport default MultiCascader;","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","React","useState","useRef","useCallback","PropTypes","pick","omit","isFunction","isNil","DropdownMenu","Checkbox","useCascadeValue","useColumnData","useFlattenData","isSomeChildChecked","getNodeParents","findNodeOfTree","getColumnsAndPaths","createChainedFunction","mergeRefs","getSafeRegExpString","useClassNames","useCustom","useUpdateEffect","PickerToggle","PickerOverlay","SearchBar","SelectedElement","PickerToggleTrigger","usePickerClassName","usePublicMethods","useToggleKeyDownEvent","useFocusItemValue","pickTriggerPropKeys","omitTriggerPropKeys","listPickerPropTypes","emptyArray","MultiCascader","forwardRef","props","ref","_selectedPaths","_props$as","as","Component","_props$data","data","_props$classPrefix","classPrefix","defaultValue","valueProp","value","_props$valueKey","valueKey","_props$labelKey","labelKey","_props$childrenKey","childrenKey","disabled","_props$disabledItemVa","disabledItemValues","_props$cleanable","cleanable","overrideLocale","locale","toggleAs","style","_props$countable","countable","_props$cascade","cascade","inline","placeholder","_props$placement","placement","_props$appearance","appearance","menuWidth","menuHeight","menuClassName","menuStyle","_props$searchable","searchable","_props$uncheckableIte","uncheckableItemValues","id","getChildren","renderValue","renderMenu","renderMenuItem","renderExtraFooter","onEnter","onExit","onExited","onClean","onSearch","onSelect","onChange","onOpen","onClose","onCheck","rest","itemKeys","_useState","active","setActive","_useFlattenData","flattenData","addFlattenData","_useCascadeValue","setValue","splitValue","_useColumnData","columnData","setColumnData","addColumn","romoveColumnByIndex","enforceUpdateColumnData","_useState2","selectedPaths","setSelectedPaths","triggerRef","overlayRef","targetRef","searchInputRef","_useCustom","rtl","selectedItems","filter","item","some","v","_useFocusItemValue","length","defaultLayer","target","current","callback","_getColumnsAndPaths","isAttachChildren","columns","paths","focusItemValue","setLayer","setKeys","onFocusItem","onKeyDown","hasValue","Number","_useClassNames","prefix","merge","_useState3","searchKeyword","setSearchKeyword","handleEntered","handleExited","handleSelect","node","cascadePaths","event","_node$childrenKey","_node$childrenKey2","_triggerRef$current","_triggerRef$current$u","columnIndex","loading","children","Promise","then","updatePosition","call","handleCheck","checked","nodeValue","nextValue","concat","push","n","handleClean","handleMenuPressEnter","_overlayRef$current","focusItem","checkbox","querySelector","getAttribute","onPickerKeyDown","toggle","onMenuKeyDown","onMenuPressEnter","handleSearch","getSearchResult","items","result","match","RegExp","i","renderSearchRow","key","_extends2","nodes","regx","labelElements","a","split","b","createElement","className","itemClasses","indeterminate","_value","map","index","renderSearchResultPanel","noResultsText","renderDropdownMenu","positionProps","speakerRef","_ref","left","top","styles","classes","searchPlaceholder","inputRef","undefined","cascadeData","selectedElement","_usePickerClassName","name","usedClassNamePropKeys","pickerProps","speaker","inputValue","displayName","propTypes","array","any","oneOf","bool","number","oneOfType","string","func"],"sources":["C:/Users/KT2/OneDrive/Documents/Buffh/ssc.fe.cheatview-main/node_modules/rsuite/esm/MultiCascader/MultiCascader.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport isFunction from 'lodash/isFunction';\nimport isNil from 'lodash/isNil';\nimport DropdownMenu from './DropdownMenu';\nimport Checkbox from '../Checkbox';\nimport { useCascadeValue, useColumnData, useFlattenData, isSomeChildChecked } from './utils';\nimport { getNodeParents, findNodeOfTree } from '../utils/treeUtils';\nimport { getColumnsAndPaths } from '../Cascader/utils';\nimport { createChainedFunction, mergeRefs, getSafeRegExpString, useClassNames, useCustom, useUpdateEffect } from '../utils';\nimport { PickerToggle, PickerOverlay, SearchBar, SelectedElement, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar emptyArray = [];\nvar MultiCascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _selectedPaths;\n\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'div' : _props$as,\n      _props$data = props.data,\n      data = _props$data === void 0 ? emptyArray : _props$data,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n      defaultValue = props.defaultValue,\n      valueProp = props.value,\n      _props$valueKey = props.valueKey,\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n      _props$labelKey = props.labelKey,\n      labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n      _props$childrenKey = props.childrenKey,\n      childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n      disabled = props.disabled,\n      _props$disabledItemVa = props.disabledItemValues,\n      disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n      _props$cleanable = props.cleanable,\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n      overrideLocale = props.locale,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      _props$countable = props.countable,\n      countable = _props$countable === void 0 ? true : _props$countable,\n      _props$cascade = props.cascade,\n      cascade = _props$cascade === void 0 ? true : _props$cascade,\n      inline = props.inline,\n      placeholder = props.placeholder,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n      _props$appearance = props.appearance,\n      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n      menuWidth = props.menuWidth,\n      menuHeight = props.menuHeight,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      _props$searchable = props.searchable,\n      searchable = _props$searchable === void 0 ? true : _props$searchable,\n      _props$uncheckableIte = props.uncheckableItemValues,\n      uncheckableItemValues = _props$uncheckableIte === void 0 ? emptyArray : _props$uncheckableIte,\n      id = props.id,\n      getChildren = props.getChildren,\n      renderValue = props.renderValue,\n      renderMenu = props.renderMenu,\n      renderMenuItem = props.renderMenuItem,\n      renderExtraFooter = props.renderExtraFooter,\n      onEnter = props.onEnter,\n      onExit = props.onExit,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onChange = props.onChange,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      onCheck = props.onCheck,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"defaultValue\", \"value\", \"valueKey\", \"labelKey\", \"childrenKey\", \"disabled\", \"disabledItemValues\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"countable\", \"cascade\", \"inline\", \"placeholder\", \"placement\", \"appearance\", \"menuWidth\", \"menuHeight\", \"menuClassName\", \"menuStyle\", \"searchable\", \"uncheckableItemValues\", \"id\", \"getChildren\", \"renderValue\", \"renderMenu\", \"renderMenuItem\", \"renderExtraFooter\", \"onEnter\", \"onExit\", \"onExited\", \"onClean\", \"onSearch\", \"onSelect\", \"onChange\", \"onOpen\", \"onClose\", \"onCheck\"]);\n\n  var itemKeys = {\n    childrenKey: childrenKey,\n    labelKey: labelKey,\n    valueKey: valueKey\n  };\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useFlattenData = useFlattenData(data, itemKeys),\n      flattenData = _useFlattenData.flattenData,\n      addFlattenData = _useFlattenData.addFlattenData;\n\n  var _useCascadeValue = useCascadeValue(_extends({}, itemKeys, {\n    uncheckableItemValues: uncheckableItemValues,\n    cascade: cascade,\n    value: valueProp || defaultValue\n  }), flattenData),\n      value = _useCascadeValue.value,\n      setValue = _useCascadeValue.setValue,\n      splitValue = _useCascadeValue.splitValue; // The columns displayed in the cascading panel.\n\n\n  var _useColumnData = useColumnData(flattenData),\n      columnData = _useColumnData.columnData,\n      setColumnData = _useColumnData.setColumnData,\n      addColumn = _useColumnData.addColumn,\n      romoveColumnByIndex = _useColumnData.romoveColumnByIndex,\n      enforceUpdateColumnData = _useColumnData.enforceUpdateColumnData;\n\n  useUpdateEffect(function () {\n    enforceUpdateColumnData(data);\n  }, [data]); // The path after cascading data selection.\n\n  var _useState2 = useState(),\n      selectedPaths = _useState2[0],\n      setSelectedPaths = _useState2[1];\n\n  var triggerRef = useRef(null);\n  var overlayRef = useRef(null);\n  var targetRef = useRef(null);\n  var searchInputRef = useRef(null);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      locale = _useCustom.locale,\n      rtl = _useCustom.rtl;\n\n  var selectedItems = flattenData.filter(function (item) {\n    return value.some(function (v) {\n      return v === item[valueKey];\n    });\n  }) || []; // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(selectedPaths === null || selectedPaths === void 0 ? void 0 : (_selectedPaths = selectedPaths[selectedPaths.length - 1]) === null || _selectedPaths === void 0 ? void 0 : _selectedPaths[valueKey], {\n    rtl: rtl,\n    data: flattenData,\n    valueKey: valueKey,\n    defaultLayer: selectedPaths !== null && selectedPaths !== void 0 && selectedPaths.length ? selectedPaths.length - 1 : 0,\n    target: function target() {\n      return overlayRef.current;\n    },\n    callback: useCallback(function (value) {\n      var _getColumnsAndPaths = getColumnsAndPaths(data, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey,\n        isAttachChildren: true\n      }),\n          columns = _getColumnsAndPaths.columns,\n          paths = _getColumnsAndPaths.paths;\n\n      setColumnData(columns);\n      setSelectedPaths(paths);\n    }, [childrenKey, data, setColumnData, valueKey])\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setLayer = _useFocusItemValue.setLayer,\n      setKeys = _useFocusItemValue.setKeys,\n      onFocusItem = _useFocusItemValue.onKeyDown;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n\n  var hasValue = selectedItems.length > 0 || Number(valueProp === null || valueProp === void 0 ? void 0 : valueProp.length) > 0 && isFunction(renderValue);\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useState3 = useState(''),\n      searchKeyword = _useState3[0],\n      setSearchKeyword = _useState3[1];\n\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    setActive(false);\n    setSearchKeyword('');\n  }, []);\n  var handleSelect = useCallback(function (node, cascadePaths, event) {\n    var _node$childrenKey, _node$childrenKey2, _triggerRef$current, _triggerRef$current$u;\n\n    setSelectedPaths(cascadePaths);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\n    var columnIndex = cascadePaths.length; // Lazy load node's children\n\n    if (typeof getChildren === 'function' && ((_node$childrenKey = node[childrenKey]) === null || _node$childrenKey === void 0 ? void 0 : _node$childrenKey.length) === 0) {\n      node.loading = true;\n      var children = getChildren(node);\n\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          node.loading = false;\n          node[childrenKey] = data;\n\n          if (targetRef.current) {\n            addFlattenData(data, node);\n            addColumn(data, columnIndex);\n          }\n        });\n      } else {\n        node.loading = false;\n        node[childrenKey] = children;\n        addFlattenData(children, node);\n        addColumn(children, columnIndex);\n      }\n    } else if ((_node$childrenKey2 = node[childrenKey]) !== null && _node$childrenKey2 !== void 0 && _node$childrenKey2.length) {\n      addColumn(node[childrenKey], columnIndex);\n    } else {\n      // Removes subsequent columns of the current column when the clicked node is a leaf node.\n      romoveColumnByIndex(columnIndex);\n    }\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$u = _triggerRef$current.updatePosition) === null || _triggerRef$current$u === void 0 ? void 0 : _triggerRef$current$u.call(_triggerRef$current);\n  }, [onSelect, getChildren, childrenKey, addFlattenData, addColumn, romoveColumnByIndex]);\n  var handleCheck = useCallback(function (node, event, checked) {\n    var nodeValue = node[valueKey];\n    var nextValue = [];\n\n    if (cascade) {\n      nextValue = splitValue(node, checked, value).value;\n    } else {\n      nextValue = [].concat(value);\n\n      if (checked) {\n        nextValue.push(nodeValue);\n      } else {\n        nextValue = nextValue.filter(function (n) {\n          return n !== nodeValue;\n        });\n      }\n    }\n\n    setValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    onCheck === null || onCheck === void 0 ? void 0 : onCheck(nextValue, node, checked, event);\n  }, [cascade, onChange, onCheck, setValue, splitValue, value, valueKey]);\n  var handleClean = useCallback(function (event) {\n    if (disabled || !targetRef.current) {\n      return;\n    }\n\n    setSelectedPaths([]);\n    setValue([]);\n    setColumnData([data]);\n    onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n  }, [data, disabled, onChange, setColumnData, setValue]);\n  var handleMenuPressEnter = useCallback(function (event) {\n    var _overlayRef$current;\n\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var checkbox = (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.querySelector(\"[data-key=\\\"\" + focusItemValue + \"\\\"] [type=\\\"checkbox\\\"]\");\n\n    if (checkbox) {\n      handleCheck(focusItem, event, (checkbox === null || checkbox === void 0 ? void 0 : checkbox.getAttribute('aria-checked')) !== 'true');\n    }\n  }, [data, focusItemValue, handleCheck, valueKey]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    searchInputRef: searchInputRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n  var handleSearch = useCallback(function (value, event) {\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n\n    if (value) {\n      setLayer(0);\n    } else if (selectedPaths !== null && selectedPaths !== void 0 && selectedPaths.length) {\n      setLayer(selectedPaths.length - 1);\n    }\n\n    setKeys([]);\n  }, [onSearch, selectedPaths, setKeys, setLayer]);\n  var getSearchResult = useCallback(function () {\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (uncheckableItemValues.some(function (value) {\n        return item[valueKey] === value;\n      })) {\n        return false;\n      }\n\n      if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n        return true;\n      }\n\n      return false;\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]); // A maximum of 100 search results are returned.\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  }, [flattenData, labelKey, searchKeyword, uncheckableItemValues, valueKey]);\n\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var _extends2;\n\n    var nodes = getNodeParents(item);\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var labelElements = [];\n    var a = item[labelKey].split(regx);\n    var b = item[labelKey].match(regx);\n\n    for (var i = 0; i < a.length; i++) {\n      labelElements.push(a[i]);\n\n      if (b[i]) {\n        labelElements.push( /*#__PURE__*/React.createElement(\"span\", {\n          key: i,\n          className: prefix('cascader-search-match')\n        }, b[i]));\n      }\n    }\n\n    nodes.push(_extends({}, item, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2)));\n    var active = value.some(function (value) {\n      if (cascade) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      }\n\n      return item[valueKey] === value;\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return nodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      className: itemClasses,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey]\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      disabled: disabled,\n      checked: active,\n      value: item[valueKey],\n      indeterminate: cascade && !active && isSomeChildChecked(item, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }),\n      onChange: function onChange(_value, checked, event) {\n        handleCheck(item, event, checked);\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: prefix('cascader-cols')\n    }, nodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    }))));\n  };\n\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var _ref = positionProps || {},\n        left = _ref.left,\n        top = _ref.top,\n        className = _ref.className;\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var classes = merge(className, menuClassName, prefix('cascader-menu', 'multi-cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword,\n      inputRef: searchInputRef\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      cascade: cascade,\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      uncheckableItemValues: uncheckableItemValues,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnData,\n      cascadePaths: selectedPaths,\n      value: value,\n      onSelect: handleSelect,\n      onCheck: handleCheck,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var selectedElement = placeholder;\n\n  if (selectedItems.length > 0) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      prefix: prefix,\n      cascade: cascade,\n      locale: locale\n    });\n  }\n\n  if (hasValue && isFunction(renderValue)) {\n    selectedElement = renderValue(value.length ? value : valueProp !== null && valueProp !== void 0 ? valueProp : [], selectedItems, selectedElement); // If renderValue returns null or undefined, hasValue is false.\n\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    classPrefix: classPrefix,\n    hasValue: hasValue,\n    countable: countable,\n    name: 'cascader',\n    appearance: appearance,\n    cleanable: cleanable\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  if (inline) {\n    return renderDropdownMenu();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    onExit: createChainedFunction(onClose, onExit),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    as: toggleAs,\n    appearance: appearance,\n    disabled: disabled,\n    ref: targetRef,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || locale.placeholder)));\n});\nMultiCascader.displayName = 'MultiCascader';\nMultiCascader.propTypes = _extends({}, listPickerPropTypes, {\n  value: PropTypes.array,\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  cascade: PropTypes.bool,\n  inline: PropTypes.bool,\n  countable: PropTypes.bool,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  uncheckableItemValues: PropTypes.array,\n  searchable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func,\n  onCheck: PropTypes.func\n});\nexport default MultiCascader;"],"mappings":"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"},"metadata":{},"sourceType":"module"}