{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KT2\\\\Desktop\\\\ssc.fe.cheatview-main\\\\src\\\\app\\\\modules\\\\orders\\\\modals\\\\AddModal\\\\ChannelItem.tsx\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport { Button, Tooltip } from 'antd';\nimport { Spinner } from 'reactstrap';\nimport { postWithoutTokenFunciton } from 'utils/ApiHelper';\nimport { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ChannelItem = props => {\n  _s();\n\n  const {\n    index,\n    channel,\n    home_rate,\n    //note,\n    direct_rate,\n    //view_need,\n    //comment_rate,\n    //mobile_rate,\n    search_rate,\n    enabled,\n    max_thread,\n    //group_id,\n    //like_rate,\n    //comment_list,\n    suggest_rate,\n    //premium_rate,\n    //keyword,\n    view_percent,\n    onStatusChange\n  } = props;\n  const STATUS_PROCESSING = 1;\n  const STATUS_ERROR = 2;\n  const STATUS_SUCCESSFUL = 3;\n  const [status, setStatus] = React.useState(STATUS_PROCESSING);\n  const [errorMsg, setErrorMsg] = React.useState('');\n  useEffect(() => {\n    processChannel();\n  }, []);\n  useEffect(() => {\n    if (status === STATUS_PROCESSING) {\n      processChannel();\n    }\n  }, [status]);\n\n  const validateChannel = _channel => {\n    return true;\n  };\n\n  const processChannel = async () => {\n    try {\n      if (!validateChannel(channel)) {\n        throw Error('Invalid channel');\n      }\n\n      onStatusChange && onStatusChange(STATUS_PROCESSING);\n      const resp = await postWithoutTokenFunciton('channel/orderlistchannel', {\n        channel_id: channel,\n        home_rate,\n        //note,\n        direct_rate,\n        //view_need,\n        //comment_rate,\n        //mobile_rate,\n        search_rate,\n        enabled,\n        max_thread,\n        //group_id,\n        //like_rate,\n        //comment_list,\n        suggest_rate,\n        //premium_rate,\n        //keyword,\n        view_percent\n      });\n\n      if (resp && resp.data) {\n        const data = resp.data;\n\n        if (data.status === 'fail') {\n          setStatus(STATUS_ERROR);\n          setErrorMsg(data.message);\n          onStatusChange && onStatusChange(STATUS_ERROR);\n        } else if (data.status === 'success') {\n          setStatus(STATUS_SUCCESSFUL);\n          onStatusChange && onStatusChange(STATUS_SUCCESSFUL);\n        }\n      }\n\n      console.log('processChannel', resp);\n    } catch (e) {\n      console.log('processChannel', e);\n      setStatus(STATUS_ERROR);\n      setErrorMsg(e.message);\n      onStatusChange && onStatusChange(STATUS_ERROR);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-1 d-flex align-items-center\",\n        children: [index + 1, \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-7 d-flex  align-items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: channel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-4 d-flex justify-content-end align-items-center\",\n        children: status === STATUS_ERROR ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-row align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n              title: errorMsg,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                id: `error_${index}`,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-info-circle-fill text-danger\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"link\",\n              onClick: () => {\n                setStatus(STATUS_PROCESSING);\n                setErrorMsg('');\n              },\n              children: \"Th\\u1EED l\\u1EA1i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)\n        }, void 0, false) : status === STATUS_SUCCESSFUL ? /*#__PURE__*/_jsxDEV(\"span\", {\n          id: `error_${index}`,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-check-circle-fill text-success\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Spinner, {\n          size: \"sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(ChannelItem, \"tA9/BpdscHV+llOnqG63mH3WF8o=\");\n\n_c = ChannelItem;\nexport default ChannelItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChannelItem\");","map":{"version":3,"names":["React","Button","Tooltip","Spinner","postWithoutTokenFunciton","useEffect","ChannelItem","props","index","channel","home_rate","direct_rate","search_rate","enabled","max_thread","suggest_rate","view_percent","onStatusChange","STATUS_PROCESSING","STATUS_ERROR","STATUS_SUCCESSFUL","status","setStatus","useState","errorMsg","setErrorMsg","processChannel","validateChannel","_channel","Error","resp","channel_id","data","message","console","log","e"],"sources":["C:/Users/KT2/Desktop/ssc.fe.cheatview-main/src/app/modules/orders/modals/AddModal/ChannelItem.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport {Button, Tooltip} from 'antd'\n\nimport {Spinner} from 'reactstrap'\nimport {postWithoutTokenFunciton} from 'utils/ApiHelper'\nimport {useEffect} from 'react'\n\ninterface IChannelItemProps {\n  index: number\n}\n\nconst ChannelItem: React.FunctionComponent<IChannelItemProps> = (\n  props: any | IChannelItemProps\n) => {\n  const {\n    index,\n    channel,\n    home_rate,\n    //note,\n    direct_rate,\n    //view_need,\n    //comment_rate,\n    //mobile_rate,\n    search_rate,\n    enabled,\n    max_thread,\n    //group_id,\n    //like_rate,\n    //comment_list,\n    suggest_rate,\n    //premium_rate,\n    //keyword,\n    view_percent,\n    onStatusChange,\n  } = props\n\n  const STATUS_PROCESSING = 1\n  const STATUS_ERROR = 2\n  const STATUS_SUCCESSFUL = 3\n\n  const [status, setStatus] = React.useState(STATUS_PROCESSING)\n  const [errorMsg, setErrorMsg] = React.useState('')\n\n  useEffect(() => {\n    processChannel()\n  }, [])\n\n  useEffect(() => {\n    if (status === STATUS_PROCESSING) {\n      processChannel()\n    }\n  }, [status])\n\n  const validateChannel = (_channel: string): boolean => {\n    return true\n  }\n\n  const processChannel = async () => {\n    try {\n      if (!validateChannel(channel)) {\n        throw Error('Invalid channel')\n      }\n      onStatusChange && onStatusChange(STATUS_PROCESSING)\n      const resp: any = await postWithoutTokenFunciton('channel/orderlistchannel', {\n        channel_id: channel,\n        home_rate,\n        //note,\n        direct_rate,\n        //view_need,\n        //comment_rate,\n        //mobile_rate,\n        search_rate,\n        enabled,\n        max_thread,\n        //group_id,\n        //like_rate,\n        //comment_list,\n        suggest_rate,\n        //premium_rate,\n        //keyword,\n        view_percent,\n      })\n      if (resp && resp.data) {\n        const data = resp.data\n        if (data.status === 'fail') {\n          setStatus(STATUS_ERROR)\n          setErrorMsg(data.message)\n          onStatusChange && onStatusChange(STATUS_ERROR)\n        } else if (data.status === 'success') {\n          setStatus(STATUS_SUCCESSFUL)\n          onStatusChange && onStatusChange(STATUS_SUCCESSFUL)\n        }\n      }\n\n      console.log('processChannel', resp)\n    } catch (e: any) {\n      console.log('processChannel', e)\n      setStatus(STATUS_ERROR)\n      setErrorMsg(e.message)\n      onStatusChange && onStatusChange(STATUS_ERROR)\n    }\n  }\n\n  return (\n    <>\n      <div className='row'>\n        <div className='col-1 d-flex align-items-center'>{index + 1}.</div>\n        <div className='col-7 d-flex  align-items-center'>\n          <span>{channel}</span>\n        </div>\n        <div className='col-4 d-flex justify-content-end align-items-center'>\n          {status === STATUS_ERROR ? (\n            <>\n              <div className='d-flex flex-row align-items-center'>\n                <Tooltip title={errorMsg}>\n                  <span id={`error_${index}`}>\n                    <i className='bi bi-info-circle-fill text-danger'></i>\n                  </span>\n                </Tooltip>\n                <Button\n                  type='link'\n                  onClick={() => {\n                    setStatus(STATUS_PROCESSING)\n                    setErrorMsg('')\n                  }}\n                >\n                  Thử lại\n                </Button>\n              </div>\n            </>\n          ) : status === STATUS_SUCCESSFUL ? (\n            <span id={`error_${index}`}>\n              <i className='bi bi-check-circle-fill text-success'></i>\n            </span>\n          ) : (\n            <Spinner size='sm' />\n          )}\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default ChannelItem\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}